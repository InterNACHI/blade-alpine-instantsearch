var BladeAlpineInstantSearch=function(){"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var e,t=(function(e,t){e.exports=function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function n(n){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?t(Object(i),!0).forEach(function(t){e(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(i,e))})}return n}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){var t,n="algoliasearch-client-js-".concat(e.key),i=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(i().getItem(n)||"{}")};return{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var n=JSON.stringify(e),r=a()[n];return Promise.all([r||t(),void 0!==r])}).then(function(e){var t=r(e,2),i=t[0];return Promise.all([i,t[1]||n.miss(i)])}).then(function(e){return r(e,1)[0]})},set:function(e,t){return Promise.resolve().then(function(){var r=a();return r[JSON.stringify(e)]=t,i().setItem(n,JSON.stringify(r)),t})},delete:function(e){return Promise.resolve().then(function(){var t=a();delete t[JSON.stringify(e)],i().setItem(n,JSON.stringify(t))})},clear:function(){return Promise.resolve().then(function(){i().removeItem(n)})}}}function o(e){var t=i(e.caches),n=t.shift();return void 0===n?{get:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return t().then(function(e){return Promise.all([e,n.miss(e)])}).then(function(e){return r(e,1)[0]})},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(e,r,i).catch(function(){return o({caches:t}).get(e,r,i)})},set:function(e,r){return n.set(e,r).catch(function(){return o({caches:t}).set(e,r)})},delete:function(e){return n.delete(e).catch(function(){return o({caches:t}).delete(e)})},clear:function(){return n.clear().catch(function(){return o({caches:t}).clear()})}}}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(n);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var o=r(),c=i&&i.miss||function(){return Promise.resolve()};return o.then(function(e){return c(e)}).then(function(){return o})},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function s(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function u(e,t){return t?(Object.keys(t).forEach(function(n){e[n]=t[n](e)}),e):e}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(n[i++])})}function l(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach(function(e){-1===["timeout","headers","queryParameters","data","cacheable"].indexOf(e)&&(r[e]=n[e])}),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var h={Read:1,Write:2,Any:3};function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return n(n({},e),{},{status:t,lastUpdate:Date.now()})}function g(e){return"string"==typeof e?{protocol:"https",url:e,accept:h.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||h.Any}}var p="POST";function m(e,t,r,a){var o=[],c=function(e,t){if("GET"!==e.method&&(void 0!==e.data||void 0!==t.data)){var r=Array.isArray(e.data)?e.data:n(n({},e.data),t.data);return JSON.stringify(r)}}(r,a),s=function(e,t){var r=n(n({},e.headers),t.headers),i={};return Object.keys(r).forEach(function(e){var t=r[e];i[e.toLowerCase()]=t}),i}(e,a),u=r.method,f="GET"!==r.method?{}:n(n({},r.data),a.data),l=n(n(n({"x-algolia-agent":e.userAgent.value},e.queryParameters),f),a.queryParameters),h=0,p=function t(n,i){var f=n.pop();if(void 0===f)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:O(o)};var g={data:c,headers:s,method:u,url:y(f,r.path,l),connectTimeout:i(h,e.timeouts.connect),responseTimeout:i(h,a.timeout)},p=function(e){var t={request:g,response:e,host:f,triesLeft:n.length};return o.push(t),t},m={onSucess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:"DeserializationError",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(r){var a=p(r);return r.isTimedOut&&h++,Promise.all([e.logger.info("Retryable failure",w(a)),e.hostsCache.set(f,d(f,r.isTimedOut?3:2))]).then(function(){return t(n,i)})},onFail:function(e){throw p(e),function(e,t){var n=e.content,r=e.status,i=n;try{i=JSON.parse(n).message}catch(e){}return function(e,t,n){return{name:"ApiError",message:e,status:t,transporterStackTrace:n}}(i,r,t)}(e,O(o))}};return e.requester.send(g).then(function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){return!e.isTimedOut&&0==~~e.status}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSucess(e):t.onFail(e)}(e,m)})};return function(e,t){return Promise.all(t.map(function(t){return e.get(t,function(){return Promise.resolve(d(t))})})).then(function(e){var n=e.filter(function(e){return function(e){return 1===e.status||Date.now()-e.lastUpdate>12e4}(e)}),r=e.filter(function(e){return function(e){return 3===e.status&&Date.now()-e.lastUpdate<=12e4}(e)}),a=[].concat(i(n),i(r));return{getTimeout:function(e,t){return(0===r.length&&0===e?1:r.length+3+e)*t},statelessHosts:a.length>0?a.map(function(e){return g(e)}):t}})}(e.hostsCache,t).then(function(e){return p(i(e.statelessHosts).reverse(),e.getTimeout)})}function v(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(e){var n="; ".concat(e.segment).concat(void 0!==e.version?" (".concat(e.version,")"):"");return-1===t.value.indexOf(n)&&(t.value="".concat(t.value).concat(n)),t}};return t}function y(e,t,n){var r=b(n),i="".concat(e.protocol,"://").concat(e.url,"/").concat("/"===t.charAt(0)?t.substr(1):t);return r.length&&(i+="?".concat(r)),i}function b(e){return Object.keys(e).map(function(t){return f("%s=%s",t,(n=e[t],"[object Object]"===Object.prototype.toString.call(n)||"[object Array]"===Object.prototype.toString.call(n)?JSON.stringify(e[t]):e[t]));var n}).join("&")}function O(e){return e.map(function(e){return w(e)})}function w(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return n(n({},e),{},{request:n(n({},e.request),{},{headers:n(n({},e.request.headers),t)})})}var S=function(e){return function(t){return u({transporter:e.transporter,appId:e.appId,indexName:t},(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).methods)}},j=function(e){return function(t,r){var i=t.map(function(e){return n(n({},e),{},{params:b(e.params||{})})});return e.transporter.read({method:p,path:"1/indexes/*/queries",data:{requests:i},cacheable:!0},r)}},P=function(e){return function(t,r){return Promise.all(t.map(function(t){var i=t.params,a=i.facetName,o=i.facetQuery,c=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(i,["facetName","facetQuery"]);return S(e)(t.indexName,{methods:{searchForFacetValues:E}}).searchForFacetValues(a,o,n(n({},r),c))}))}},R=function(e){return function(t,n,r){return e.transporter.read({method:p,path:f("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},F=function(e){return function(t,n){return e.transporter.read({method:p,path:f("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},E=function(e){return function(t,n,r){return e.transporter.read({method:p,path:f("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}};function x(e,t,i){var f={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise(function(t){var n=new XMLHttpRequest;n.open(e.method,e.url,!0),Object.keys(e.headers).forEach(function(t){return n.setRequestHeader(t,e.headers[t])});var r,i=function(e,r){return setTimeout(function(){n.abort(),t({status:0,content:r,isTimedOut:!0})},1e3*e)},a=i(e.connectTimeout,"Connection timeout");n.onreadystatechange=function(){n.readyState>n.OPENED&&void 0===r&&(clearTimeout(a),r=i(e.responseTimeout,"Socket timeout"))},n.onerror=function(){0===n.status&&(clearTimeout(a),clearTimeout(r),t({content:n.responseText||"Network request failed",status:n.status,isTimedOut:!1}))},n.onload=function(){clearTimeout(a),clearTimeout(r),t({content:n.responseText,status:n.status,isTimedOut:!1})},n.send(e.data)})}},logger:{debug:function(e,t){return Promise.resolve()},info:function(e,t){return Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}},responsesCache:c(),requestsCache:c({serializable:!1}),hostsCache:o({caches:[a({key:"".concat("4.8.3","-").concat(e)}),c()]}),userAgent:v("4.8.3").add({segment:"Browser",version:"lite"}),authMode:0};return function(e){var t=e.appId,i=function(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return 1===e?r:{}},queryParameters:function(){return 0===e?r:{}}}}(void 0!==e.authMode?e.authMode:1,t,e.apiKey),a=function(e){var t={hostsCache:e.hostsCache,logger:e.logger,requester:e.requester,requestsCache:e.requestsCache,responsesCache:e.responsesCache,timeouts:e.timeouts,userAgent:e.userAgent,headers:e.headers,queryParameters:e.queryParameters,hosts:e.hosts.map(function(e){return g(e)}),read:function(e,n){var i=l(n,t.timeouts.read),a=function(){return m(t,t.hosts.filter(function(e){return 0!=(e.accept&h.Read)}),e,i)};if(!0!==(void 0!==i.cacheable?i.cacheable:e.cacheable))return a();var o={request:e,mappedRequestOptions:i,transporter:{queryParameters:t.queryParameters,headers:t.headers}};return t.responsesCache.get(o,function(){return t.requestsCache.get(o,function(){return t.requestsCache.set(o,a()).then(function(e){return Promise.all([t.requestsCache.delete(o),e])},function(e){return Promise.all([t.requestsCache.delete(o),Promise.reject(e)])}).then(function(e){return r(e,2)[1]})})},{miss:function(e){return t.responsesCache.set(o,e)}})},write:function(e,n){return m(t,t.hosts.filter(function(e){return 0!=(e.accept&h.Write)}),e,l(n,t.timeouts.write))}};return t}(n(n({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:h.Read},{url:"".concat(t,".algolia.net"),accept:h.Write}].concat(s([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:n(n(n({},i.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:n(n({},i.queryParameters()),e.queryParameters)}));return u({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then(function(){})}},e.methods)}(n(n(n({},f),i),{},{methods:{search:j,searchForFacetValues:P,multipleQueries:j,multipleSearchForFacetValues:P,initIndex:function(e){return function(t){return S(e)(t,{methods:{search:F,searchForFacetValues:E,findAnswers:R}})}}}}))}return x.version="4.8.3",x}()}(e={exports:{}}),e.exports);function n(e){return"function"==typeof e||Array.isArray(e)||"[object Object]"===Object.prototype.toString.call(e)}function r(e,t){if(e===t)return e;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=t[i],o=e[i];void 0!==o&&void 0===a||(e[i]=n(o)&&n(a)?r(o,a):"object"==typeof(c=a)&&null!==c?r(Array.isArray(c)?[]:{},c):c)}var c;return e}var i=function(e){n(e)||(e={});for(var t=1,i=arguments.length;t<i;t++){var a=arguments[t];n(a)&&r(e,a)}return e},a=function(){var e=Array.prototype.slice.call(arguments);return e.reduceRight(function(e,t){return Object.keys(Object(t)).forEach(function(n){void 0!==t[n]&&(void 0!==e[n]&&delete e[n],e[n]=t[n])}),e},{})},o=function(e,t){return e.filter(function(n,r){return t.indexOf(n)>-1&&e.indexOf(n)===r})},c=function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]},s=function e(t){if("number"==typeof t)return t;if("string"==typeof t)return parseFloat(t);if(Array.isArray(t))return t.map(e);throw new Error("The value should be a number, a parsable string or an array of those.")},u=function(e,t){if(null===e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i},f=function(e){return e&&Object.keys(e).length>0},l={addRefinement:function(e,t,n){if(l.isRefined(e,t,n))return e;var r=""+n,i=e[t]?e[t].concat(r):[r],o={};return o[t]=i,a({},o,e)},removeRefinement:function(e,t,n){if(void 0===n)return l.clearRefinement(e,function(e,n){return t===n});var r=""+n;return l.clearRefinement(e,function(e,n){return t===n&&r===e})},toggleRefinement:function(e,t,n){if(void 0===n)throw new Error("toggleRefinement should be used with a value");return l.isRefined(e,t,n)?l.removeRefinement(e,t,n):l.addRefinement(e,t,n)},clearRefinement:function(e,t,n){if(void 0===t)return f(e)?{}:e;if("string"==typeof t)return u(e,[t]);if("function"==typeof t){var r=!1,i=Object.keys(e).reduce(function(i,a){var o=e[a]||[],c=o.filter(function(e){return!t(e,a,n)});return c.length!==o.length&&(r=!0),i[a]=c,i},{});return r?i:e}},isRefined:function(e,t,n){var r=!!e[t]&&e[t].length>0;return void 0!==n&&r?-1!==e[t].indexOf(""+n):r}},h=l;function d(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every(function(e,n){return d(t[n],e)}):e===t}function g(e){var t,n=e?g._parseNumbers(e):{};void 0===n.userToken||null!==(t=n.userToken)&&/^[a-zA-Z0-9_-]{1,64}$/.test(t)||console.warn("[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\n  - Format: [a-zA-Z0-9_-]{1,64}"),this.facets=n.facets||[],this.disjunctiveFacets=n.disjunctiveFacets||[],this.hierarchicalFacets=n.hierarchicalFacets||[],this.facetsRefinements=n.facetsRefinements||{},this.facetsExcludes=n.facetsExcludes||{},this.disjunctiveFacetsRefinements=n.disjunctiveFacetsRefinements||{},this.numericRefinements=n.numericRefinements||{},this.tagRefinements=n.tagRefinements||[],this.hierarchicalFacetsRefinements=n.hierarchicalFacetsRefinements||{};var r=this;Object.keys(n).forEach(function(e){-1===g.PARAMETERS.indexOf(e)&&void 0!==n[e]&&(r[e]=n[e])})}g.PARAMETERS=Object.keys(new g),g._parseNumbers=function(e){if(e instanceof g)return e;var t={};if(["aroundPrecision","aroundRadius","getRankingInfo","minWordSizefor2Typos","minWordSizefor1Typo","page","maxValuesPerFacet","distinct","minimumAroundRadius","hitsPerPage","minProximity"].forEach(function(n){var r=e[n];if("string"==typeof r){var i=parseFloat(r);t[n]=isNaN(i)?r:i}}),Array.isArray(e.insideBoundingBox)&&(t.insideBoundingBox=e.insideBoundingBox.map(function(e){return Array.isArray(e)?e.map(function(e){return parseFloat(e)}):e})),e.numericRefinements){var n={};Object.keys(e.numericRefinements).forEach(function(t){var r=e.numericRefinements[t]||{};n[t]={},Object.keys(r).forEach(function(e){var i=r[e].map(function(e){return Array.isArray(e)?e.map(function(e){return"string"==typeof e?parseFloat(e):e}):"string"==typeof e?parseFloat(e):e});n[t][e]=i})}),t.numericRefinements=n}return i({},e,t)},g.make=function(e){var t=new g(e);return(e.hierarchicalFacets||[]).forEach(function(e){if(e.rootPath){var n=t.getHierarchicalRefinement(e.name);n.length>0&&0!==n[0].indexOf(e.rootPath)&&(t=t.clearRefinements(e.name)),0===(n=t.getHierarchicalRefinement(e.name)).length&&(t=t.toggleHierarchicalFacetRefinement(e.name,e.rootPath))}}),t},g.validate=function(e,t){var n=t||{};return e.tagFilters&&n.tagRefinements&&n.tagRefinements.length>0?new Error("[Tags] Cannot switch from the managed tag API to the advanced API. It is probably an error, if it is really what you want, you should first clear the tags with clearTags method."):e.tagRefinements.length>0&&n.tagFilters?new Error("[Tags] Cannot switch from the advanced tag API to the managed API. It is probably an error, if it is not, you should first clear the tags with clearTags method."):e.numericFilters&&n.numericRefinements&&f(n.numericRefinements)?new Error("[Numeric filters] Can't switch from the advanced to the managed API. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):f(e.numericRefinements)&&n.numericFilters?new Error("[Numeric filters] Can't switch from the managed API to the advanced. It is probably an error, if this is really what you want, you have to first clear the numeric filters."):null},g.prototype={constructor:g,clearRefinements:function(e){var t={numericRefinements:this._clearNumericRefinements(e),facetsRefinements:h.clearRefinement(this.facetsRefinements,e,"conjunctiveFacet"),facetsExcludes:h.clearRefinement(this.facetsExcludes,e,"exclude"),disjunctiveFacetsRefinements:h.clearRefinement(this.disjunctiveFacetsRefinements,e,"disjunctiveFacet"),hierarchicalFacetsRefinements:h.clearRefinement(this.hierarchicalFacetsRefinements,e,"hierarchicalFacet")};return t.numericRefinements===this.numericRefinements&&t.facetsRefinements===this.facetsRefinements&&t.facetsExcludes===this.facetsExcludes&&t.disjunctiveFacetsRefinements===this.disjunctiveFacetsRefinements&&t.hierarchicalFacetsRefinements===this.hierarchicalFacetsRefinements?this:this.setQueryParameters(t)},clearTags:function(){return void 0===this.tagFilters&&0===this.tagRefinements.length?this:this.setQueryParameters({tagFilters:void 0,tagRefinements:[]})},setIndex:function(e){return e===this.index?this:this.setQueryParameters({index:e})},setQuery:function(e){return e===this.query?this:this.setQueryParameters({query:e})},setPage:function(e){return e===this.page?this:this.setQueryParameters({page:e})},setFacets:function(e){return this.setQueryParameters({facets:e})},setDisjunctiveFacets:function(e){return this.setQueryParameters({disjunctiveFacets:e})},setHitsPerPage:function(e){return this.hitsPerPage===e?this:this.setQueryParameters({hitsPerPage:e})},setTypoTolerance:function(e){return this.typoTolerance===e?this:this.setQueryParameters({typoTolerance:e})},addNumericRefinement:function(e,t,n){var r=s(n);if(this.isNumericRefined(e,t,r))return this;var a=i({},this.numericRefinements);return a[e]=i({},a[e]),a[e][t]?(a[e][t]=a[e][t].slice(),a[e][t].push(r)):a[e][t]=[r],this.setQueryParameters({numericRefinements:a})},getConjunctiveRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsRefinements[e]||[]},getDisjunctiveRefinements:function(e){return this.isDisjunctiveFacet(e)&&this.disjunctiveFacetsRefinements[e]||[]},getHierarchicalRefinement:function(e){return this.hierarchicalFacetsRefinements[e]||[]},getExcludeRefinements:function(e){return this.isConjunctiveFacet(e)&&this.facetsExcludes[e]||[]},removeNumericRefinement:function(e,t,n){return void 0!==n?this.isNumericRefined(e,t,n)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(r,i){return i===e&&r.op===t&&d(r.val,s(n))})}):this:void 0!==t?this.isNumericRefined(e,t)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(n,r){return r===e&&n.op===t})}):this:this.isNumericRefined(e)?this.setQueryParameters({numericRefinements:this._clearNumericRefinements(function(t,n){return n===e})}):this},getNumericRefinements:function(e){return this.numericRefinements[e]||{}},getNumericRefinement:function(e,t){return this.numericRefinements[e]&&this.numericRefinements[e][t]},_clearNumericRefinements:function(e){if(void 0===e)return f(this.numericRefinements)?{}:this.numericRefinements;if("string"==typeof e)return u(this.numericRefinements,[e]);if("function"==typeof e){var t=!1,n=this.numericRefinements,r=Object.keys(n).reduce(function(r,i){var a=n[i],o={};return a=a||{},Object.keys(a).forEach(function(n){var r=a[n]||[],c=[];r.forEach(function(t){e({val:t,op:n},i,"numeric")||c.push(t)}),c.length!==r.length&&(t=!0),o[n]=c}),r[i]=o,r},{});return t?r:this.numericRefinements}},addFacet:function(e){return this.isConjunctiveFacet(e)?this:this.setQueryParameters({facets:this.facets.concat([e])})},addDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this:this.setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.concat([e])})},addHierarchicalFacet:function(e){if(this.isHierarchicalFacet(e.name))throw new Error("Cannot declare two hierarchical facets with the same name: `"+e.name+"`");return this.setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.concat([e])})},addFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return h.isRefined(this.facetsRefinements,e,t)?this:this.setQueryParameters({facetsRefinements:h.addRefinement(this.facetsRefinements,e,t)})},addExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return h.isRefined(this.facetsExcludes,e,t)?this:this.setQueryParameters({facetsExcludes:h.addRefinement(this.facetsExcludes,e,t)})},addDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return h.isRefined(this.disjunctiveFacetsRefinements,e,t)?this:this.setQueryParameters({disjunctiveFacetsRefinements:h.addRefinement(this.disjunctiveFacetsRefinements,e,t)})},addTagRefinement:function(e){if(this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.concat(e)};return this.setQueryParameters(t)},removeFacet:function(e){return this.isConjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({facets:this.facets.filter(function(t){return t!==e})}):this},removeDisjunctiveFacet:function(e){return this.isDisjunctiveFacet(e)?this.clearRefinements(e).setQueryParameters({disjunctiveFacets:this.disjunctiveFacets.filter(function(t){return t!==e})}):this},removeHierarchicalFacet:function(e){return this.isHierarchicalFacet(e)?this.clearRefinements(e).setQueryParameters({hierarchicalFacets:this.hierarchicalFacets.filter(function(t){return t.name!==e})}):this},removeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return h.isRefined(this.facetsRefinements,e,t)?this.setQueryParameters({facetsRefinements:h.removeRefinement(this.facetsRefinements,e,t)}):this},removeExcludeRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return h.isRefined(this.facetsExcludes,e,t)?this.setQueryParameters({facetsExcludes:h.removeRefinement(this.facetsExcludes,e,t)}):this},removeDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return h.isRefined(this.disjunctiveFacetsRefinements,e,t)?this.setQueryParameters({disjunctiveFacetsRefinements:h.removeRefinement(this.disjunctiveFacetsRefinements,e,t)}):this},removeTagRefinement:function(e){if(!this.isTagRefined(e))return this;var t={tagRefinements:this.tagRefinements.filter(function(t){return t!==e})};return this.setQueryParameters(t)},toggleRefinement:function(e,t){return this.toggleFacetRefinement(e,t)},toggleFacetRefinement:function(e,t){if(this.isHierarchicalFacet(e))return this.toggleHierarchicalFacetRefinement(e,t);if(this.isConjunctiveFacet(e))return this.toggleConjunctiveFacetRefinement(e,t);if(this.isDisjunctiveFacet(e))return this.toggleDisjunctiveFacetRefinement(e,t);throw new Error("Cannot refine the undeclared facet "+e+"; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets")},toggleConjunctiveFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsRefinements:h.toggleRefinement(this.facetsRefinements,e,t)})},toggleExcludeFacetRefinement:function(e,t){if(!this.isConjunctiveFacet(e))throw new Error(e+" is not defined in the facets attribute of the helper configuration");return this.setQueryParameters({facetsExcludes:h.toggleRefinement(this.facetsExcludes,e,t)})},toggleDisjunctiveFacetRefinement:function(e,t){if(!this.isDisjunctiveFacet(e))throw new Error(e+" is not defined in the disjunctiveFacets attribute of the helper configuration");return this.setQueryParameters({disjunctiveFacetsRefinements:h.toggleRefinement(this.disjunctiveFacetsRefinements,e,t)})},toggleHierarchicalFacetRefinement:function(e,t){if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration");var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e)),r={},i=void 0!==this.hierarchicalFacetsRefinements[e]&&this.hierarchicalFacetsRefinements[e].length>0&&(this.hierarchicalFacetsRefinements[e][0]===t||0===this.hierarchicalFacetsRefinements[e][0].indexOf(t+n));return r[e]=i?-1===t.indexOf(n)?[]:[t.slice(0,t.lastIndexOf(n))]:[t],this.setQueryParameters({hierarchicalFacetsRefinements:a({},r,this.hierarchicalFacetsRefinements)})},addHierarchicalFacetRefinement:function(e,t){if(this.isHierarchicalFacetRefined(e))throw new Error(e+" is already refined.");if(!this.isHierarchicalFacet(e))throw new Error(e+" is not defined in the hierarchicalFacets attribute of the helper configuration.");var n={};return n[e]=[t],this.setQueryParameters({hierarchicalFacetsRefinements:a({},n,this.hierarchicalFacetsRefinements)})},removeHierarchicalFacetRefinement:function(e){if(!this.isHierarchicalFacetRefined(e))return this;var t={};return t[e]=[],this.setQueryParameters({hierarchicalFacetsRefinements:a({},t,this.hierarchicalFacetsRefinements)})},toggleTagRefinement:function(e){return this.isTagRefined(e)?this.removeTagRefinement(e):this.addTagRefinement(e)},isDisjunctiveFacet:function(e){return this.disjunctiveFacets.indexOf(e)>-1},isHierarchicalFacet:function(e){return void 0!==this.getHierarchicalFacetByName(e)},isConjunctiveFacet:function(e){return this.facets.indexOf(e)>-1},isFacetRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&h.isRefined(this.facetsRefinements,e,t)},isExcludeRefined:function(e,t){return!!this.isConjunctiveFacet(e)&&h.isRefined(this.facetsExcludes,e,t)},isDisjunctiveFacetRefined:function(e,t){return!!this.isDisjunctiveFacet(e)&&h.isRefined(this.disjunctiveFacetsRefinements,e,t)},isHierarchicalFacetRefined:function(e,t){if(!this.isHierarchicalFacet(e))return!1;var n=this.getHierarchicalRefinement(e);return t?-1!==n.indexOf(t):n.length>0},isNumericRefined:function(e,t,n){if(void 0===n&&void 0===t)return!!this.numericRefinements[e];var r=this.numericRefinements[e]&&void 0!==this.numericRefinements[e][t];if(void 0===n||!r)return r;var i,a=s(n),o=void 0!==(i=a,c(this.numericRefinements[e][t],function(e){return d(e,i)}));return r&&o},isTagRefined:function(e){return-1!==this.tagRefinements.indexOf(e)},getRefinedDisjunctiveFacets:function(){var e=this,t=o(Object.keys(this.numericRefinements).filter(function(t){return Object.keys(e.numericRefinements[t]).length>0}),this.disjunctiveFacets);return Object.keys(this.disjunctiveFacetsRefinements).filter(function(t){return e.disjunctiveFacetsRefinements[t].length>0}).concat(t).concat(this.getRefinedHierarchicalFacets())},getRefinedHierarchicalFacets:function(){var e=this;return o(this.hierarchicalFacets.map(function(e){return e.name}),Object.keys(this.hierarchicalFacetsRefinements).filter(function(t){return e.hierarchicalFacetsRefinements[t].length>0}))},getUnrefinedDisjunctiveFacets:function(){var e=this.getRefinedDisjunctiveFacets();return this.disjunctiveFacets.filter(function(t){return-1===e.indexOf(t)})},managedParameters:["index","facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements"],getQueryParams:function(){var e=this.managedParameters,t={},n=this;return Object.keys(this).forEach(function(r){var i=n[r];-1===e.indexOf(r)&&void 0!==i&&(t[r]=i)}),t},setQueryParameter:function(e,t){if(this[e]===t)return this;var n={};return n[e]=t,this.setQueryParameters(n)},setQueryParameters:function(e){if(!e)return this;var t=g.validate(this,e);if(t)throw t;var n=this,r=g._parseNumbers(e),i=Object.keys(this).reduce(function(e,t){return e[t]=n[t],e},{}),a=Object.keys(r).reduce(function(e,t){var n=void 0!==r[t];return void 0===e[t]||n?(n&&(e[t]=r[t]),e):u(e,[t])},i);return new this.constructor(a)},resetPage:function(){return void 0===this.page?this:this.setPage(0)},_getHierarchicalFacetSortBy:function(e){return e.sortBy||["isRefined:desc","name:asc"]},_getHierarchicalFacetSeparator:function(e){return e.separator||" > "},_getHierarchicalRootPath:function(e){return e.rootPath||null},_getHierarchicalShowParentLevel:function(e){return"boolean"!=typeof e.showParentLevel||e.showParentLevel},getHierarchicalFacetByName:function(e){return c(this.hierarchicalFacets,function(t){return t.name===e})},getHierarchicalFacetBreadcrumb:function(e){if(!this.isHierarchicalFacet(e))return[];var t=this.getHierarchicalRefinement(e)[0];if(!t)return[];var n=this._getHierarchicalFacetSeparator(this.getHierarchicalFacetByName(e));return t.split(n).map(function(e){return e.trim()})},toString:function(){return JSON.stringify(this,null,2)}};var p=g;function m(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=void 0!==t,a=null===t;if(!a&&e>t||r&&i||!n)return 1;if(!r&&e<t||a&&n||!i)return-1}return 0}var v=function(e,t,n){if(!Array.isArray(e))return[];Array.isArray(n)||(n=[]);var r=e.map(function(e,n){return{criteria:t.map(function(t){return e[t]}),index:n,value:e}});return r.sort(function(e,t){for(var r=-1;++r<e.criteria.length;){var i=m(e.criteria[r],t.criteria[r]);if(i)return r>=n.length?i:"desc"===n[r]?-i:i}return e.index-t.index}),r.map(function(e){return e.value})},y=function(e){return Array.isArray(e)?e.filter(Boolean):[]},b=function(e,t){if(!Array.isArray(e))return-1;for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},O=function(e,t){var n=(t||[]).map(function(e){return e.split(":")});return e.reduce(function(e,t){var r=t.split(":"),i=c(n,function(e){return e[0]===r[0]});return r.length>1||!i?(e[0].push(r[0]),e[1].push(r[1]),e):(e[0].push(i[0]),e[1].push(i[1]),e)},[[],[]])};function w(e){var t={};return e.forEach(function(e,n){t[e]=n}),t}function S(e,t,n){t&&t[n]&&(e.stats=t[n])}function j(e,t){var n=t[0];this._rawResults=t;var r=this;Object.keys(n).forEach(function(e){r[e]=n[e]}),this.processingTimeMS=t.reduce(function(e,t){return void 0===t.processingTimeMS?e:e+t.processingTimeMS},0),this.disjunctiveFacets=[],this.hierarchicalFacets=e.hierarchicalFacets.map(function(){return[]}),this.facets=[];var o=e.getRefinedDisjunctiveFacets(),s=w(e.facets),u=w(e.disjunctiveFacets),f=1,l=n.facets||{};Object.keys(l).forEach(function(t){var i,a=l[t],o=(i=t,c(e.hierarchicalFacets,function(e){return(e.attributes||[]).indexOf(i)>-1}));if(o){var f=o.attributes.indexOf(t),h=b(e.hierarchicalFacets,function(e){return e.name===o.name});r.hierarchicalFacets[h][f]={attribute:t,data:a,exhaustive:n.exhaustiveFacetsCount}}else{var d,g=-1!==e.disjunctiveFacets.indexOf(t),p=-1!==e.facets.indexOf(t);g&&(r.disjunctiveFacets[d=u[t]]={name:t,data:a,exhaustive:n.exhaustiveFacetsCount},S(r.disjunctiveFacets[d],n.facets_stats,t)),p&&(r.facets[d=s[t]]={name:t,data:a,exhaustive:n.exhaustiveFacetsCount},S(r.facets[d],n.facets_stats,t))}}),this.hierarchicalFacets=y(this.hierarchicalFacets),o.forEach(function(o){var c=t[f],s=c&&c.facets?c.facets:{},l=e.getHierarchicalFacetByName(o);Object.keys(s).forEach(function(t){var o,f=s[t];if(l){o=b(e.hierarchicalFacets,function(e){return e.name===l.name});var h=b(r.hierarchicalFacets[o],function(e){return e.attribute===t});if(-1===h)return;r.hierarchicalFacets[o][h].data=i({},r.hierarchicalFacets[o][h].data,f)}else r.disjunctiveFacets[o=u[t]]={name:t,data:a({},f,n.facets&&n.facets[t]||{}),exhaustive:c.exhaustiveFacetsCount},S(r.disjunctiveFacets[o],c.facets_stats,t),e.disjunctiveFacetsRefinements[t]&&e.disjunctiveFacetsRefinements[t].forEach(function(n){!r.disjunctiveFacets[o].data[n]&&e.disjunctiveFacetsRefinements[t].indexOf(n)>-1&&(r.disjunctiveFacets[o].data[n]=0)})}),f++}),e.getRefinedHierarchicalFacets().forEach(function(n){var i=e.getHierarchicalFacetByName(n),o=e._getHierarchicalFacetSeparator(i),c=e.getHierarchicalRefinement(n);if(!(0===c.length||c[0].split(o).length<2)){var s=t[f],u=s&&s.facets?s.facets:{};Object.keys(u).forEach(function(t){var n=u[t],s=b(e.hierarchicalFacets,function(e){return e.name===i.name}),f=b(r.hierarchicalFacets[s],function(e){return e.attribute===t});if(-1!==f){var l={};if(c.length>0){var h=c[0].split(o)[0];l[h]=r.hierarchicalFacets[s][f].data[h]}r.hierarchicalFacets[s][f].data=a(l,n,r.hierarchicalFacets[s][f].data)}}),f++}}),Object.keys(e.facetsExcludes).forEach(function(t){var i=e.facetsExcludes[t],a=s[t];r.facets[a]={name:t,data:n.facets[t],exhaustive:n.exhaustiveFacetsCount},i.forEach(function(e){r.facets[a]=r.facets[a]||{name:t},r.facets[a].data=r.facets[a].data||{},r.facets[a].data[e]=0})}),this.hierarchicalFacets=this.hierarchicalFacets.map(function(e){return function(t,n){var r=e.hierarchicalFacets[n],i=e.hierarchicalFacetsRefinements[r.name]&&e.hierarchicalFacetsRefinements[r.name][0]||"",a=e._getHierarchicalFacetSeparator(r),o=e._getHierarchicalRootPath(r),s=e._getHierarchicalShowParentLevel(r),u=O(e._getHierarchicalFacetSortBy(r)),f=t.every(function(e){return e.exhaustive}),l=function(e,t,n,r,i){return function(a,o,s){var u=a;if(s>0){var f=0;for(u=a;f<s;){var l=u&&Array.isArray(u.data)?u.data:[];u=c(l,function(e){return e.isRefined}),f++}}if(u){var h=Object.keys(o.data).map(function(e){return[e,o.data[e]]}).filter(function(e){return function(e,t,n,r,i,a){return(!i||0===e.indexOf(i)&&i!==e)&&(!i&&-1===e.indexOf(r)||i&&e.split(r).length-i.split(r).length==1||-1===e.indexOf(r)&&-1===n.indexOf(r)||0===n.indexOf(e)||0===e.indexOf(t+r)&&(a||0===e.indexOf(n)))}(e[0],u.path||n,i,t,n,r)});u.data=v(h.map(function(e){return function(e,t,n,r,i){var a=t.split(n);return{name:a[a.length-1].trim(),path:t,count:e,isRefined:r===t||0===r.indexOf(t+n),exhaustive:i,data:null}}(e[1],e[0],t,i,o.exhaustive)}),e[0],e[1])}return a}}(u,a,o,s,i),h=t;return o&&(h=t.slice(o.split(a).length)),h.reduce(l,{name:e.hierarchicalFacets[n].name,count:null,isRefined:!0,path:null,exhaustive:f,data:null})}}(e)),this.facets=y(this.facets),this.disjunctiveFacets=y(this.disjunctiveFacets),this._state=e}function P(e,t){if(!t.data||0===t.data.length)return t;var n=t.data.map(function(t){return P(e,t)}),r=e(n);return i({},t,{data:r})}function R(e,t){var n=c(e,function(e){return e.name===t});return n&&n.stats}function F(e,t,n,r,i){var a=c(i,function(e){return e.name===n});return{type:t,attributeName:n,name:r,count:a&&a.data&&a.data[r]?a.data[r]:0,exhaustive:a&&a.exhaustive||!1}}j.prototype.getFacetByName=function(e){function t(t){return t.name===e}return c(this.facets,t)||c(this.disjunctiveFacets,t)||c(this.hierarchicalFacets,t)},j.DEFAULT_SORT=["isRefined:desc","count:desc","name:asc"],j.prototype.getFacetValues=function(e,t){var n=function(e,t){function n(e){return e.name===t}if(e._state.isConjunctiveFacet(t)){var r=c(e.facets,n);return r?Object.keys(r.data).map(function(n){return{name:n,count:r.data[n],isRefined:e._state.isFacetRefined(t,n),isExcluded:e._state.isExcludeRefined(t,n)}}):[]}if(e._state.isDisjunctiveFacet(t)){var i=c(e.disjunctiveFacets,n);return i?Object.keys(i.data).map(function(n){return{name:n,count:i.data[n],isRefined:e._state.isDisjunctiveFacetRefined(t,n)}}):[]}if(e._state.isHierarchicalFacet(t))return c(e.hierarchicalFacets,n)}(this,e);if(n){var r=a({},t,{sortBy:j.DEFAULT_SORT});if(Array.isArray(r.sortBy)){var i=O(r.sortBy,j.DEFAULT_SORT);return Array.isArray(n)?v(n,i[0],i[1]):P(function(e){return v(e,i[0],i[1])},n)}if("function"==typeof r.sortBy)return Array.isArray(n)?n.sort(r.sortBy):P(function(e){return function(e,t){return t.sort(e)}(r.sortBy,e)},n);throw new Error("options.sortBy is optional but if defined it must be either an array of string (predicates) or a sorting function")}},j.prototype.getFacetStats=function(e){return this._state.isConjunctiveFacet(e)?R(this.facets,e):this._state.isDisjunctiveFacet(e)?R(this.disjunctiveFacets,e):void 0},j.prototype.getRefinements=function(){var e=this._state,t=this,n=[];return Object.keys(e.facetsRefinements).forEach(function(r){e.facetsRefinements[r].forEach(function(e){n.push(F(0,"facet",r,e,t.facets))})}),Object.keys(e.facetsExcludes).forEach(function(r){e.facetsExcludes[r].forEach(function(e){n.push(F(0,"exclude",r,e,t.facets))})}),Object.keys(e.disjunctiveFacetsRefinements).forEach(function(r){e.disjunctiveFacetsRefinements[r].forEach(function(e){n.push(F(0,"disjunctive",r,e,t.disjunctiveFacets))})}),Object.keys(e.hierarchicalFacetsRefinements).forEach(function(r){e.hierarchicalFacetsRefinements[r].forEach(function(i){n.push(function(e,t,n,r){var i=e.getHierarchicalFacetByName(t),a=e._getHierarchicalFacetSeparator(i),o=n.split(a),s=c(r,function(e){return e.name===t}),u=o.reduce(function(e,t){var n=e&&c(e.data,function(e){return e.name===t});return void 0!==n?n:e},s);return{type:"hierarchical",attributeName:t,name:u&&u.path||"",count:u&&u.count||0,exhaustive:u&&u.exhaustive||!1}}(e,r,i,t.hierarchicalFacets))})}),Object.keys(e.numericRefinements).forEach(function(t){var r=e.numericRefinements[t];Object.keys(r).forEach(function(e){r[e].forEach(function(r){n.push({type:"numeric",attributeName:t,name:r,numericValue:r,operator:e})})})}),e.tagRefinements.forEach(function(e){n.push({type:"tag",attributeName:"_tags",name:e})}),n};var E=j;function x(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var I=x;function _(e){return"function"==typeof e}function T(e){return"object"==typeof e&&null!==e}function D(e){return void 0===e}x.EventEmitter=x,x.prototype._events=void 0,x.prototype._maxListeners=void 0,x.defaultMaxListeners=10,x.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},x.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||T(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(D(n=this._events[e]))return!1;if(_(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(T(n))for(i=Array.prototype.slice.call(arguments,1),r=(o=n.slice()).length,a=0;a<r;a++)o[a].apply(this,i);return!0},x.prototype.on=x.prototype.addListener=function(e,t){var n;if(!_(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,_(t.listener)?t.listener:t),this._events[e]?T(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,T(this._events[e])&&!this._events[e].warned&&(n=D(this._maxListeners)?x.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},x.prototype.once=function(e,t){if(!_(t))throw TypeError("listener must be a function");var n=!1;function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},x.prototype.removeListener=function(e,t){var n,r,i,a;if(!_(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=(n=this._events[e]).length,r=-1,n===t||_(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(T(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},x.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(_(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},x.prototype.listeners=function(e){return this._events&&this._events[e]?_(this._events[e])?[this._events[e]]:this._events[e].slice():[]},x.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(_(t))return 1;if(t)return t.length}return 0},x.listenerCount=function(e,t){return e.listenerCount(t)};var A=function(e,t){e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})};function N(e,t){this.main=e,this.fn=t,this.lastResults=null}A(N,I.EventEmitter),N.prototype.detach=function(){this.removeAllListeners(),this.main.detachDerivedHelper(this)},N.prototype.getModifiedState=function(e){return this.fn(e)};var k=N,L={_getQueries:function(e,t){var n=[];return n.push({indexName:e,params:L._getHitsSearchParams(t)}),t.getRefinedDisjunctiveFacets().forEach(function(r){n.push({indexName:e,params:L._getDisjunctiveFacetSearchParams(t,r)})}),t.getRefinedHierarchicalFacets().forEach(function(r){var i=t.getHierarchicalFacetByName(r),a=t.getHierarchicalRefinement(r),o=t._getHierarchicalFacetSeparator(i);a.length>0&&a[0].split(o).length>1&&n.push({indexName:e,params:L._getDisjunctiveFacetSearchParams(t,r,!0)})}),n},_getHitsSearchParams:function(e){var t=e.facets.concat(e.disjunctiveFacets).concat(L._getHitsHierarchicalFacetsAttributes(e)),n=L._getFacetFilters(e),r=L._getNumericFilters(e),a={facets:t,tagFilters:L._getTagFilters(e)};return n.length>0&&(a.facetFilters=n),r.length>0&&(a.numericFilters=r),i({},e.getQueryParams(),a)},_getDisjunctiveFacetSearchParams:function(e,t,n){var r=L._getFacetFilters(e,t,n),a=L._getNumericFilters(e,t),o={hitsPerPage:1,page:0,attributesToRetrieve:[],attributesToHighlight:[],attributesToSnippet:[],tagFilters:L._getTagFilters(e),analytics:!1,clickAnalytics:!1},c=e.getHierarchicalFacetByName(t);return o.facets=c?L._getDisjunctiveHierarchicalFacetAttribute(e,c,n):t,a.length>0&&(o.numericFilters=a),r.length>0&&(o.facetFilters=r),i({},e.getQueryParams(),o)},_getNumericFilters:function(e,t){if(e.numericFilters)return e.numericFilters;var n=[];return Object.keys(e.numericRefinements).forEach(function(r){var i=e.numericRefinements[r]||{};Object.keys(i).forEach(function(e){t!==r&&(i[e]||[]).forEach(function(t){if(Array.isArray(t)){var i=t.map(function(t){return r+e+t});n.push(i)}else n.push(r+e+t)})})}),n},_getTagFilters:function(e){return e.tagFilters?e.tagFilters:e.tagRefinements.join(",")},_getFacetFilters:function(e,t,n){var r=[],i=e.facetsRefinements||{};Object.keys(i).forEach(function(e){(i[e]||[]).forEach(function(t){r.push(e+":"+t)})});var a=e.facetsExcludes||{};Object.keys(a).forEach(function(e){(a[e]||[]).forEach(function(t){r.push(e+":-"+t)})});var o=e.disjunctiveFacetsRefinements||{};Object.keys(o).forEach(function(e){var n=o[e]||[];if(e!==t&&n&&0!==n.length){var i=[];n.forEach(function(t){i.push(e+":"+t)}),r.push(i)}});var c=e.hierarchicalFacetsRefinements||{};return Object.keys(c).forEach(function(i){var a=(c[i]||[])[0];if(void 0!==a){var o,s,u=e.getHierarchicalFacetByName(i),f=e._getHierarchicalFacetSeparator(u),l=e._getHierarchicalRootPath(u);if(t===i){if(-1===a.indexOf(f)||!l&&!0===n||l&&l.split(f).length===a.split(f).length)return;l?(s=l.split(f).length-1,a=l):(s=a.split(f).length-2,a=a.slice(0,a.lastIndexOf(f))),o=u.attributes[s]}else s=a.split(f).length-1,o=u.attributes[s];o&&r.push([o+":"+a])}}),r},_getHitsHierarchicalFacetsAttributes:function(e){return e.hierarchicalFacets.reduce(function(t,n){var r=e.getHierarchicalRefinement(n.name)[0];if(!r)return t.push(n.attributes[0]),t;var i=e._getHierarchicalFacetSeparator(n),a=r.split(i).length,o=n.attributes.slice(0,a+1);return t.concat(o)},[])},_getDisjunctiveHierarchicalFacetAttribute:function(e,t,n){var r=e._getHierarchicalFacetSeparator(t);if(!0===n){var i=e._getHierarchicalRootPath(t),a=0;return i&&(a=i.split(r).length),[t.attributes[a]]}var o=(e.getHierarchicalRefinement(t.name)[0]||"").split(r).length-1;return t.attributes.slice(0,o+1)},getSearchForFacetQuery:function(e,t,n,r){var a=r.isDisjunctiveFacet(e)?r.clearRefinements(e):r,o={facetQuery:t,facetName:e};return"number"==typeof n&&(o.maxFacetHits=n),i({},L._getHitsSearchParams(a),o)}},H=L;function W(e,t,n){"function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.3.4)"),this.setClient(e);var r=n||{};r.index=t,this.state=p.make(r),this.lastResults=null,this._queryId=0,this._lastQueryIdReceived=-1,this.derivedHelpers=[],this._currentNbQueries=0}function M(e){if(e<0)throw new Error("Page requested below 0.");return this._change({state:this.state.setPage(e),isPageReset:!1}),this}function C(){return this.state.page}A(W,I.EventEmitter),W.prototype.search=function(){return this._search({onlyWithDerivedHelpers:!1}),this},W.prototype.searchOnlyWithDerivedHelpers=function(){return this._search({onlyWithDerivedHelpers:!0}),this},W.prototype.getQuery=function(){return H._getHitsSearchParams(this.state)},W.prototype.searchOnce=function(e,t){var n=e?this.state.setQueryParameters(e):this.state,r=H._getQueries(n.index,n),i=this;if(this._currentNbQueries++,this.emit("searchOnce",{state:n}),!t)return this.client.search(r).then(function(e){return i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),{content:new E(n,e.results),state:n,_originalResponse:e}},function(e){throw i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),e});this.client.search(r).then(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(null,new E(n,e.results),n)}).catch(function(e){i._currentNbQueries--,0===i._currentNbQueries&&i.emit("searchQueueEmpty"),t(e,null,n)})},W.prototype.searchForFacetValues=function(e,t,n,r){var i="function"==typeof this.client.searchForFacetValues;if(!i&&"function"!=typeof this.client.initIndex)throw new Error("search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues");var a=this.state.setQueryParameters(r||{}),o=a.isDisjunctiveFacet(e),c=H.getSearchForFacetQuery(e,t,n,a);this._currentNbQueries++;var s=this;return this.emit("searchForFacetValues",{state:a,facet:e,query:t}),(i?this.client.searchForFacetValues([{indexName:a.index,params:c}]):this.client.initIndex(a.index).searchForFacetValues(c)).then(function(t){return s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),(t=Array.isArray(t)?t[0]:t).facetHits.forEach(function(t){t.isRefined=o?a.isDisjunctiveFacetRefined(e,t.value):a.isFacetRefined(e,t.value)}),t},function(e){throw s._currentNbQueries--,0===s._currentNbQueries&&s.emit("searchQueueEmpty"),e})},W.prototype.setQuery=function(e){return this._change({state:this.state.resetPage().setQuery(e),isPageReset:!0}),this},W.prototype.clearRefinements=function(e){return this._change({state:this.state.resetPage().clearRefinements(e),isPageReset:!0}),this},W.prototype.clearTags=function(){return this._change({state:this.state.resetPage().clearTags(),isPageReset:!0}),this},W.prototype.addDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.addDisjunctiveRefine=function(){return this.addDisjunctiveFacetRefinement.apply(this,arguments)},W.prototype.addHierarchicalFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addHierarchicalFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.addNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().addNumericRefinement(e,t,n),isPageReset:!0}),this},W.prototype.addFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().addFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.addRefine=function(){return this.addFacetRefinement.apply(this,arguments)},W.prototype.addFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().addExcludeRefinement(e,t),isPageReset:!0}),this},W.prototype.addExclude=function(){return this.addFacetExclusion.apply(this,arguments)},W.prototype.addTag=function(e){return this._change({state:this.state.resetPage().addTagRefinement(e),isPageReset:!0}),this},W.prototype.removeNumericRefinement=function(e,t,n){return this._change({state:this.state.resetPage().removeNumericRefinement(e,t,n),isPageReset:!0}),this},W.prototype.removeDisjunctiveFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeDisjunctiveFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.removeDisjunctiveRefine=function(){return this.removeDisjunctiveFacetRefinement.apply(this,arguments)},W.prototype.removeHierarchicalFacetRefinement=function(e){return this._change({state:this.state.resetPage().removeHierarchicalFacetRefinement(e),isPageReset:!0}),this},W.prototype.removeFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().removeFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.removeRefine=function(){return this.removeFacetRefinement.apply(this,arguments)},W.prototype.removeFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().removeExcludeRefinement(e,t),isPageReset:!0}),this},W.prototype.removeExclude=function(){return this.removeFacetExclusion.apply(this,arguments)},W.prototype.removeTag=function(e){return this._change({state:this.state.resetPage().removeTagRefinement(e),isPageReset:!0}),this},W.prototype.toggleFacetExclusion=function(e,t){return this._change({state:this.state.resetPage().toggleExcludeFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.toggleExclude=function(){return this.toggleFacetExclusion.apply(this,arguments)},W.prototype.toggleRefinement=function(e,t){return this.toggleFacetRefinement(e,t)},W.prototype.toggleFacetRefinement=function(e,t){return this._change({state:this.state.resetPage().toggleFacetRefinement(e,t),isPageReset:!0}),this},W.prototype.toggleRefine=function(){return this.toggleFacetRefinement.apply(this,arguments)},W.prototype.toggleTag=function(e){return this._change({state:this.state.resetPage().toggleTagRefinement(e),isPageReset:!0}),this},W.prototype.nextPage=function(){return this.setPage((this.state.page||0)+1)},W.prototype.previousPage=function(){return this.setPage((this.state.page||0)-1)},W.prototype.setCurrentPage=M,W.prototype.setPage=M,W.prototype.setIndex=function(e){return this._change({state:this.state.resetPage().setIndex(e),isPageReset:!0}),this},W.prototype.setQueryParameter=function(e,t){return this._change({state:this.state.resetPage().setQueryParameter(e,t),isPageReset:!0}),this},W.prototype.setState=function(e){return this._change({state:p.make(e),isPageReset:!1}),this},W.prototype.overrideStateWithoutTriggeringChangeEvent=function(e){return this.state=new p(e),this},W.prototype.hasRefinements=function(e){return!!f(this.state.getNumericRefinements(e))||(this.state.isConjunctiveFacet(e)?this.state.isFacetRefined(e):this.state.isDisjunctiveFacet(e)?this.state.isDisjunctiveFacetRefined(e):!!this.state.isHierarchicalFacet(e)&&this.state.isHierarchicalFacetRefined(e))},W.prototype.isExcluded=function(e,t){return this.state.isExcludeRefined(e,t)},W.prototype.isDisjunctiveRefined=function(e,t){return this.state.isDisjunctiveFacetRefined(e,t)},W.prototype.hasTag=function(e){return this.state.isTagRefined(e)},W.prototype.isTagRefined=function(){return this.hasTagRefinements.apply(this,arguments)},W.prototype.getIndex=function(){return this.state.index},W.prototype.getCurrentPage=C,W.prototype.getPage=C,W.prototype.getTags=function(){return this.state.tagRefinements},W.prototype.getRefinements=function(e){var t=[];this.state.isConjunctiveFacet(e)?(this.state.getConjunctiveRefinements(e).forEach(function(e){t.push({value:e,type:"conjunctive"})}),this.state.getExcludeRefinements(e).forEach(function(e){t.push({value:e,type:"exclude"})})):this.state.isDisjunctiveFacet(e)&&this.state.getDisjunctiveRefinements(e).forEach(function(e){t.push({value:e,type:"disjunctive"})});var n=this.state.getNumericRefinements(e);return Object.keys(n).forEach(function(e){t.push({value:n[e],operator:e,type:"numeric"})}),t},W.prototype.getNumericRefinement=function(e,t){return this.state.getNumericRefinement(e,t)},W.prototype.getHierarchicalFacetBreadcrumb=function(e){return this.state.getHierarchicalFacetBreadcrumb(e)},W.prototype._search=function(e){var t=this.state,n=[],r=[];e.onlyWithDerivedHelpers||(r=H._getQueries(t.index,t),n.push({state:t,queriesCount:r.length,helper:this}),this.emit("search",{state:t,results:this.lastResults}));var i=this.derivedHelpers.map(function(e){var r=e.getModifiedState(t),i=H._getQueries(r.index,r);return n.push({state:r,queriesCount:i.length,helper:e}),e.emit("search",{state:r,results:e.lastResults}),i}),a=Array.prototype.concat.apply(r,i),o=this._queryId++;this._currentNbQueries++;try{this.client.search(a).then(this._dispatchAlgoliaResponse.bind(this,n,o)).catch(this._dispatchAlgoliaError.bind(this,o))}catch(e){this.emit("error",{error:e})}},W.prototype._dispatchAlgoliaResponse=function(e,t,n){if(!(t<this._lastQueryIdReceived)){this._currentNbQueries-=t-this._lastQueryIdReceived,this._lastQueryIdReceived=t,0===this._currentNbQueries&&this.emit("searchQueueEmpty");var r=n.results.slice();e.forEach(function(e){var t=e.state,n=e.helper,i=r.splice(0,e.queriesCount),a=n.lastResults=new E(t,i);n.emit("result",{results:a,state:t})})}},W.prototype._dispatchAlgoliaError=function(e,t){e<this._lastQueryIdReceived||(this._currentNbQueries-=e-this._lastQueryIdReceived,this._lastQueryIdReceived=e,this.emit("error",{error:t}),0===this._currentNbQueries&&this.emit("searchQueueEmpty"))},W.prototype.containsRefinement=function(e,t,n,r){return e||0!==t.length||0!==n.length||0!==r.length},W.prototype._hasDisjunctiveRefinements=function(e){return this.state.disjunctiveRefinements[e]&&this.state.disjunctiveRefinements[e].length>0},W.prototype._change=function(e){var t=e.state,n=e.isPageReset;t!==this.state&&(this.state=t,this.emit("change",{state:this.state,results:this.lastResults,isPageReset:n}))},W.prototype.clearCache=function(){return this.client.clearCache&&this.client.clearCache(),this},W.prototype.setClient=function(e){return this.client===e||("function"==typeof e.addAlgoliaAgent&&e.addAlgoliaAgent("JS Helper (3.3.4)"),this.client=e),this},W.prototype.getClient=function(){return this.client},W.prototype.derive=function(e){var t=new k(this,e);return this.derivedHelpers.push(t),t},W.prototype.detachDerivedHelper=function(e){var t=this.derivedHelpers.indexOf(e);if(-1===t)throw new Error("Derived helper already detached");this.derivedHelpers.splice(t,1)},W.prototype.hasPendingRequests=function(){return this._currentNbQueries>0};var Q=W;function U(e,t,n){return new Q(e,t,n)}U.version="3.3.4",U.AlgoliaSearchHelper=Q,U.SearchParameters=p,U.SearchResults=E;var q=U;function B(e){return e.toString().charAt(0).toUpperCase()+e.toString().slice(1)}var V=Promise.resolve(),$=function(e){var t=null,n=!1,r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];null===t&&(t=V.then(function(){t=null,n?n=!1:e.apply(void 0,i)}))};return r.wait=function(){if(null===t)throw new Error("The deferred function should be called before calling `wait()`");return t},r.cancel=function(){null!==t&&(n=!0)},r};function J(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function z(e,t){for(var n,r=0;r<e.length;r++)if(t(n=e[r],r,e))return n}function Y(e){return String(e).replace(/^\\-/,"-")}function G(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o={type:t,attribute:n,name:r},c=z(a,function(e){return e.name===n});"hierarchical"===t?function(){for(var t=e.getHierarchicalFacetByName(n),a=r.split(t.separator),o=function(e){var t;c=c&&c.data&&z(Object.keys(c.data).map((t=c.data,function(e){return t[e]})),function(t){return t.name===a[e]})},s=0;void 0!==c&&s<a.length;++s)o(s);i=c&&c.count}():i=c&&c.data&&c.data[o.name];var s=c&&c.exhaustive;return void 0!==i&&(o.count=i),void 0!==s&&(o.exhaustive=s),o}function X(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],i=t.facetsRefinements,a=void 0===i?{}:i,o=t.facetsExcludes,c=void 0===o?{}:o,s=t.disjunctiveFacetsRefinements,u=void 0===s?{}:s,f=t.hierarchicalFacetsRefinements,l=void 0===f?{}:f,h=t.numericRefinements,d=void 0===h?{}:h,g=t.tagRefinements,p=void 0===g?[]:g;return Object.keys(a).forEach(function(n){a[n].forEach(function(i){r.push(G(t,"facet",n,i,e.facets))})}),Object.keys(c).forEach(function(e){c[e].forEach(function(t){r.push({type:"exclude",attribute:e,name:t,exclude:!0})})}),Object.keys(u).forEach(function(n){u[n].forEach(function(i){r.push(G(t,"disjunctive",n,Y(i),e.disjunctiveFacets))})}),Object.keys(l).forEach(function(n){l[n].forEach(function(i){r.push(G(t,"hierarchical",n,i,e.hierarchicalFacets))})}),Object.keys(d).forEach(function(e){var t=d[e];Object.keys(t).forEach(function(n){var i=n,a=t[i];(Array.isArray(a)?a:[a]).forEach(function(t){r.push({type:"numeric",attribute:e,name:"".concat(t),numericValue:t,operator:i})})})}),p.forEach(function(e){r.push({type:"tag",attribute:"_tags",name:e})}),n&&t.query&&t.query.trim()&&r.push({attribute:"query",type:"query",name:t.query,query:t.query}),r}function Z(e){var t=e.attributesToClear,n=void 0===t?[]:t,r=e.helper.state.setPage(0);return r=n.reduce(function(e,t){return r.isNumericRefined(t)?e.removeNumericRefinement(t):r.isHierarchicalFacet(t)?e.removeHierarchicalFacetRefinement(t):r.isDisjunctiveFacet(t)?e.removeDisjunctiveFacetRefinement(t):r.isConjunctiveFacet(t)?e.removeFacetRefinement(t):e},r),-1!==n.indexOf("query")&&(r=r.setQuery("")),r}function K(e){return"number"==typeof e&&e<0&&(e=String(e).replace(/^-/,"\\-")),e}function ee(e){return Object.prototype.toString.call(e).slice(8,-1)}function te(e,t){if(void 0===e||"function"!=typeof e)throw new Error("The render function is not valid (received type ".concat(ee(e),").\n\n").concat(t))}function ne(){}var re=ne,ie=ne;function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}"development"==="production".NODE_ENV&&(re=function(e){console.warn("[InstantSearch.js]: ".concat(e.trim()))},(ie=function(e,t){e||ie.cache[t]||(ie.cache[t]=!0,re(t))}).cache={});var oe={query:{connectors:["connectSearchBox"],widgets:["ais.searchBox","ais.autocomplete","ais.voiceSearch"]},refinementList:{connectors:["connectRefinementList"],widgets:["ais.refinementList"]},menu:{connectors:["connectMenu"],widgets:["ais.menu"]},hierarchicalMenu:{connectors:["connectHierarchicalMenu"],widgets:["ais.hierarchicalMenu"]},numericMenu:{connectors:["connectNumericMenu"],widgets:["ais.numericMenu"]},ratingMenu:{connectors:["connectRatingMenu"],widgets:["ais.ratingMenu"]},range:{connectors:["connectRange"],widgets:["ais.rangeInput","ais.rangeSlider","ais.range"]},toggle:{connectors:["connectToggleRefinement"],widgets:["ais.toggleRefinement"]},geoSearch:{connectors:["connectGeoSearch"],widgets:["ais.geoSearch"]},sortBy:{connectors:["connectSortBy"],widgets:["ais.sortBy"]},page:{connectors:["connectPagination"],widgets:["ais.pagination","ais.infiniteHits"]},hitsPerPage:{connectors:["connectHitsPerPage"],widgets:["ais.hitsPerPage"]},configure:{connectors:["connectConfigure"],widgets:["ais.configure"]},places:{connectors:[],widgets:["ais.places"]}};function ce(e){var t=e.index,n=e.indexUiState,r=t.getWidgets().map(function(e){return e.$$type}).filter(Boolean),i=Object.keys(n).reduce(function(e,t){var n=oe[t]&&oe[t].widgets;return n&&!n.some(function(e){return r.includes(e)})&&e.push([t,{connectors:oe[t].connectors,widgets:oe[t].widgets.map(function(e){return e.split("ais.")[1]})}]),e},[]);"development"==="production".NODE_ENV&&ie(0===i.length,'The UI state for the index "'.concat(t.getIndexId(),'" is not consistent with the widgets mounted.\n\nThis can happen when the UI state is specified via `initialUiState`, `routing` or `setUiState` but that the widgets responsible for this state were not added. This results in those query parameters not being sent to the API.\n\nTo fully reflect the state, some widgets need to be added to the index "').concat(t.getIndexId(),'":\n\n').concat(i.map(function(e){var t,n,r=ae(e,2),i=r[1].widgets;return"- `".concat(r[0],"` needs one of these widgets: ").concat((t=[]).concat.apply(t,(n=i.map(function(e){return function(e){switch(e){case"range":return[];case"menu":return["menu","menuSelect"];default:return[e]}}(e)}),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(n)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}())).map(function(e){return'"'.concat(e,'"')}).join(", "))}).join("\n"),'\n\nIf you do not wish to display widgets but still want to support their search parameters, you can mount "virtual widgets" that don\'t render anything:\n\n```\n').concat(i.filter(function(e){return ae(e,2)[1].connectors.length>0}).map(function(e){var t=ae(e,2)[1],n=t.connectors,r=B(t.widgets[0]),i=n[0];return"const virtual".concat(r," = ").concat(i,"(() => null);")}).join("\n"),"\n\nsearch.addWidgets([\n  ").concat(i.filter(function(e){return ae(e,2)[1].connectors.length>0}).map(function(e){var t=B(ae(e,2)[1].widgets[0]);return"virtual".concat(t,"({ /* ... */ })")}).join(",\n  "),"\n]);\n```\n\nIf you're using custom widgets that do set these query parameters, we recommend using connectors instead.\n\nSee https://www.algolia.com/doc/guides/building-search-ui/widgets/customize-an-existing-widget/js/#customize-the-complete-ui-of-the-widgets"))}function se(e,t){return(Array.isArray(t)?t:t.split(".")).reduce(function(e,t){return e&&e[t]},e)}function ue(e){return"number"==typeof e&&isFinite(e)}function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e){if(!function(e){return"object"===fe(e)&&null!==e}(e)||"[object Object]"!==function(e){return null===e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function he(e){var t,n=e.start,r=void 0===n?0:n,i=e.step,a=void 0===i?1:i,o=0===a?1:a,c=Math.round((e.end-r)/o);return(t=Array(c),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(t)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).map(function(e,t){return r+t*o})}function de(e){return e!==Object(e)}function ge(e,t){if(e===t)return!0;if(de(e)||de(t)||"function"==typeof e||"function"==typeof t)return e===t;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(!(i in t))return!1;if(!ge(e[i],t[i]))return!1}return!0}var pe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},me=/[&<>"']/g,ve=RegExp(me.source),ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},be=/&(amp|quot|lt|gt|#39);/g,Oe=RegExp(be.source);function we(){return(we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach(function(t){Pe(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Re={highlightPreTag:"__ais-highlight__",highlightPostTag:"__/ais-highlight__"},Fe="<mark>",Ee="</mark>";function xe(e){return function(e){return e&&ve.test(e)?e.replace(me,function(e){return pe[e]}):e}(e).replace(new RegExp(Re.highlightPreTag,"g"),Fe).replace(new RegExp(Re.highlightPostTag,"g"),Ee)}function Ie(e){return le(e)&&"string"!=typeof e.value?Object.keys(e).reduce(function(t,n){return je({},t,Pe({},n,Ie(e[n])))},{}):Array.isArray(e)?e.map(Ie):je({},e,{value:xe(e.value)})}function _e(e){return void 0===e.__escaped&&((e=e.map(function(e){var t=we({},e);return t._highlightResult&&(t._highlightResult=Ie(t._highlightResult)),t._snippetResult&&(t._snippetResult=Ie(t._snippetResult)),t})).__escaped=!0),e}function Te(e){return e.map(function(e){return je({},e,{highlighted:xe(e.highlighted)})})}function De(e){return e.map(function(e){return e.isHighlighted?"<mark>"+e.value+"</mark>":e.value}).join("")}function Ae(e){var t=e.split(Fe),n=t.shift(),r=n?[{value:n,isHighlighted:!1}]:[];return t.forEach(function(e){var t=e.split("</mark>");r.push({value:t[0],isHighlighted:!0}),""!==t[1]&&r.push({value:t[1],isHighlighted:!1})}),r}var Ne=new RegExp(/\w/i);function ke(e,t){var n,r,i,a=e[t],o=(null===(n=e[t+1])||void 0===n?void 0:n.isHighlighted)||!0,c=(null===(r=e[t-1])||void 0===r?void 0:r.isHighlighted)||!0;return Ne.test((i=a.value)&&Oe.test(i)?i.replace(be,function(e){return ye[e]}):i)||c!==o?a.isHighlighted:c}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function He(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach(function(t){We(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e){return e.some(function(e){return e.isHighlighted})?e.map(function(t,n){return He({},t,{isHighlighted:!ke(e,n)})}):e.map(function(e){return He({},e,{isHighlighted:!1})})}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach(function(t){Ue(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qe=function(e,t){var n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["facets","disjunctiveFacets","facetsRefinements","facetsExcludes","disjunctiveFacetsRefinements","numericRefinements","tagRefinements","hierarchicalFacets","hierarchicalFacetsRefinements","ruleContexts"]);return e.setQueryParameters(n)},Be=function(e,t){return t.facets.reduce(function(e,t){return e.addFacet(t)},e)},Ve=function(e,t){return t.disjunctiveFacets.reduce(function(e,t){return e.addDisjunctiveFacet(t)},e)},$e=function(e,t){return e.setQueryParameters({hierarchicalFacets:t.hierarchicalFacets.reduce(function(e,t){var n=function(e,n){if(!Array.isArray(e))return-1;for(var r=0;r<e.length;r++)if(e[r].name===t.name)return r;return-1}(e);if(-1===n)return e.concat(t);var r=e.slice();return r.splice(n,1,t),r},e.hierarchicalFacets)})},Je=function(e,t){return t.tagRefinements.reduce(function(e,t){return e.addTagRefinement(t)},e)},ze=function(e,t){return e.setQueryParameters({facetsRefinements:Qe({},e.facetsRefinements,{},t.facetsRefinements)})},Ye=function(e,t){return e.setQueryParameters({facetsExcludes:Qe({},e.facetsExcludes,{},t.facetsExcludes)})},Ge=function(e,t){return e.setQueryParameters({disjunctiveFacetsRefinements:Qe({},e.disjunctiveFacetsRefinements,{},t.disjunctiveFacetsRefinements)})},Xe=function(e,t){return e.setQueryParameters({numericRefinements:Qe({},e.numericRefinements,{},t.numericRefinements)})},Ze=function(e,t){return e.setQueryParameters({hierarchicalFacetsRefinements:Qe({},e.hierarchicalFacetsRefinements,{},t.hierarchicalFacetsRefinements)})},Ke=function(e,t){var n=J([].concat(e.ruleContexts).concat(t.ruleContexts).filter(Boolean));return n.length>0?e.setQueryParameters({ruleContexts:n}):e},et=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){var n=Ze(e,t),r=$e(n,t),i=Je(r,t),a=Xe(i,t),o=Ge(a,t),c=Ye(o,t),s=ze(c,t),u=Ve(s,t),f=Ke(u,t),l=Be(f,t);return qe(l,t)})};function tt(e){return Array.isArray(e)?e:[e]}var nt=function(e){var t=e.connector;return["https://www.algolia.com/doc/api-reference/widgets/",e.name,"/js/",void 0!==t&&t?"#connector":""].join("")},rt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map(function(e){return nt(e)}).join(", ");return function(e){return[e,"See documentation: ".concat(r)].filter(Boolean).join("\n\n")}};function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var at=/^(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)$/;function ot(e){var t=e.match(at);if(!t)throw new Error('Invalid value for "aroundLatLng" parameter: "'.concat(e,'"'));return{lat:parseFloat(t[1]),lng:parseFloat(t[2])}}function ct(e){return Array.isArray(e)?function(e){var t=it(e,1)[0],n=it(t=void 0===t?[void 0,void 0,void 0,void 0]:t,4),r=n[0],i=n[1],a=n[2],o=n[3];if(!(r&&i&&a&&o))throw new Error('Invalid value for "insideBoundingBox" parameter: ['.concat(e,"]"));return{northEast:{lat:r,lng:i},southWest:{lat:a,lng:o}}}(e):function(e){var t=it(e.split(",").map(parseFloat),4),n=t[0],r=t[1],i=t[2],a=t[3];if(!(n&&r&&i&&a))throw new Error('Invalid value for "insideBoundingBox" parameter: "'.concat(e,'"'));return{northEast:{lat:n,lng:r},southWest:{lat:i,lng:a}}}(e)}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=function(e,t,n){return e.map(function(e,r){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach(function(t){ut(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{__position:n*t+r+1})})};function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=function(e,t){return t?e.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(t){ht(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{__queryID:t})}):e};function gt(e,t,n){return e.state.isHierarchicalFacet(t)?e.state.isHierarchicalFacetRefined(t,n):e.state.isConjunctiveFacet(t)?e.state.isFacetRefined(t,n):e.state.isDisjunctiveFacetRefined(t,n)}function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mt(e){var t=e.instantSearchInstance,n=e.helper,r=e.attribute,i=e.widgetType;return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];var c=a[0],s=a[1],u=a[2],f=void 0===u?"Filter Applied":u;if(1===a.length&&"object"===pt(a[0]))t.sendEventToInsights(a[0]);else if("click"!==c||2!==a.length&&3!==a.length){if("development"==="production".NODE_ENV)throw new Error("You need to pass two arguments like:\n  sendEvent('click', facetValue);\n\nIf you want to send a custom payload, you can pass one object: sendEvent(customPayload);\n")}else gt(n,r,s)||t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:i,eventType:c,payload:{eventName:f,index:n.getIndex(),filters:["".concat(r,":").concat(s)]}})}}function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var yt=function(e){var t=e.index,n=e.widgetType,r=e.methodName,i=e.args;if(1===i.length&&"object"===vt(i[0]))return i[0];var a=i[0],o=i[1],c=i[2];if(!o){if("development"==="production".NODE_ENV)throw new Error("You need to pass hit or hits as the second argument like:\n  ".concat(r,"(eventType, hit);\n  "));return null}if(("click"===a||"conversion"===a)&&!c){if("development"==="production".NODE_ENV)throw new Error("You need to pass eventName as the third argument for 'click' or 'conversion' events like:\n  ".concat(r,"('click', hit, 'Product Purchased');\n\n  To learn more about event naming: https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/in-depth/clicks-conversions-best-practices/\n  "));return null}var s=Array.isArray(o)?o:[o];if(0===s.length)return null;var u=s[0].__queryID,f=s.map(function(e){return e.objectID}),l=s.map(function(e){return e.__position});if("view"===a)return{insightsMethod:"viewedObjectIDs",widgetType:n,eventType:a,payload:{eventName:c||"Hits Viewed",index:t,objectIDs:f}};if("click"===a)return{insightsMethod:"clickedObjectIDsAfterSearch",widgetType:n,eventType:a,payload:{eventName:c,index:t,queryID:u,objectIDs:f,positions:l}};if("conversion"===a)return{insightsMethod:"convertedObjectIDsAfterSearch",widgetType:n,eventType:a,payload:{eventName:c,index:t,queryID:u,objectIDs:f}};if("development"==="production".NODE_ENV)throw new Error('eventType("'.concat(a,'") is not supported.\n    If you want to send a custom payload, you can pass one object: ').concat(r,"(customPayload);\n    "));return null};function bt(e){var t=e.instantSearchInstance,n=e.index,r=e.widgetType;return function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];var o=yt({widgetType:r,index:n,methodName:"sendEvent",args:i});o&&t.sendEventToInsights(o)}}function Ot(e){var t=e.index,n=e.widgetType;return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var a=yt({widgetType:n,index:t,methodName:"bindEvent",args:r});return a?"data-insights-event=".concat(btoa(JSON.stringify(a))):""}}function wt(e,t){if(!e)return null;var n=e.numericRefinements[t],r=[];return Object.keys(n).filter(function(e){return Array.isArray(n[e])&&n[e].length>0}).forEach(function(e){n[e].forEach(function(n){r.push("".concat(t).concat(e).concat(n))})}),r}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach(function(t){Pt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ft=rt({name:"index-widget"});function Et(e){return"ais.index"===e.$$type}function xt(e,t){var n=t.state,r=t.isPageReset,i=t._uiState;n!==e.state&&(e.state=n,e.emit("change",{state:e.state,results:e.lastResults,isPageReset:r,_uiState:i}))}function It(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.filter(function(e){return!Et(e)}).reduce(function(e,n){return n.getWidgetUiState||n.getWidgetState?n.getWidgetUiState?n.getWidgetUiState(e,t):n.getWidgetState(e,t):e},n)}function _t(e,t){var n=t.initialSearchParameters,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(t,["initialSearchParameters"]);return e.filter(function(e){return!Et(e)}).reduce(function(e,t){return t.getWidgetSearchParameters?t.getWidgetSearchParameters(e,r):e},n)}function Tt(e){var t=e.filter(Et);0!==t.length&&t.forEach(function(e){var t=e.getHelper();xt(t,{state:t.state.resetPage(),isPageReset:!0}),Tt(e.getWidgets())})}function Dt(e){return e.filter(Et).reduce(function(e,t){return e.concat.apply(e,[{indexId:t.getIndexId(),results:t.getResults(),helper:t.getHelper()}].concat(Rt(Dt(t.getWidgets()))))},[])}var At=function(e){if(void 0===e||void 0===e.indexName)throw new Error(Ft("The `indexName` option is required."));var t=e.indexName,n=e.indexId,r=void 0===n?t:n,i=[],a={},o=null,c=null,s=null,u=null;return{$$type:"ais.index",getIndexName:function(){return t},getIndexId:function(){return r},getHelper:function(){return s},getResults:function(){return u&&u.lastResults},getScopedResults:function(){var e=this.getParent();return Dt(e?e.getWidgets():[this])},getParent:function(){return c},createURL:function(e){return o._createURL(Pt({},r,It(i,{searchParameters:e,helper:s})))},getWidgets:function(){return i},addWidgets:function(e){var t=this;if(!Array.isArray(e))throw new Error(Ft("The `addWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(Ft("The widget definition expects a `render` and/or an `init` method."));return i=i.concat(e),o&&Boolean(e.length)&&(xt(s,{state:_t(i,{uiState:a,initialSearchParameters:s.state}),_uiState:a}),e.forEach(function(e){e.getRenderState&&Nt({renderState:e.getRenderState(o.renderState[t.getIndexId()]||{},{uiState:o._initialUiState,helper:t.getHelper(),parent:t,instantSearchInstance:o,state:s.state,renderState:o.renderState,templatesConfig:o.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:o._isSearchStalled}}),instantSearchInstance:o,parent:t})}),e.forEach(function(e){e.init&&e.init({helper:s,parent:t,uiState:o._initialUiState,instantSearchInstance:o,state:s.state,renderState:o.renderState,templatesConfig:o.templatesConfig,createURL:t.createURL,scopedResults:[],searchMetadata:{isSearchStalled:o._isSearchStalled}})}),o.scheduleSearch()),this},removeWidgets:function(e){if(!Array.isArray(e))throw new Error(Ft("The `removeWidgets` method expects an array of widgets."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(Ft("The widget definition expects a `dispose` method."));if(i=i.filter(function(t){return-1===e.indexOf(t)}),o&&Boolean(e.length)){var t=e.reduce(function(e,t){return t.dispose({helper:s,state:e})||e},s.state);a=It(i,{searchParameters:t,helper:s}),s.setState(_t(i,{uiState:a,initialSearchParameters:t})),i.length&&o.scheduleSearch()}return this},init:function(e){var n=this,f=e.instantSearchInstance,l=e.uiState;o=f,c=e.parent;var h=f.mainHelper,d=_t(i,{uiState:a=l[r]||{},initialSearchParameters:new q.SearchParameters({index:t})});(s=q({},d.index,d)).search=function(){return f.onStateChange?(f.onStateChange({uiState:f.mainIndex.getWidgetUiState({}),setUiState:f.setUiState.bind(f)}),h):h.search()},s.searchWithoutTriggeringOnStateChange=function(){return h.search()},s.searchForFacetValues=function(e,t,n,r){var i=s.state.setQueryParameters(r);return h.searchForFacetValues(e,t,n,i)},u=h.derive(function(){return et.apply(void 0,Rt(function(e){for(var t=e.getParent(),n=[e.getHelper().state];null!==t;)n=[t.getHelper().state].concat(n),t=t.getParent();return n}(n)))}),s.on("change",function(e){e.isPageReset&&Tt(i)}),u.on("search",function(){f.scheduleStalledRender(),"development"==="production".NODE_ENV&&ce({index:n,indexUiState:a})}),u.on("result",function(e){var t=e.results;f.scheduleRender(),s.lastResults=t}),i.forEach(function(e){e.getRenderState&&Nt({renderState:e.getRenderState(f.renderState[n.getIndexId()]||{},{uiState:l,helper:s,parent:n,instantSearchInstance:f,state:s.state,renderState:f.renderState,templatesConfig:f.templatesConfig,createURL:n.createURL,scopedResults:[],searchMetadata:{isSearchStalled:f._isSearchStalled}}),instantSearchInstance:f,parent:n})}),i.forEach(function(e){"development"==="production".NODE_ENV&&ie(!e.getWidgetState||Boolean(e.getWidgetUiState),"The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead."),e.init&&e.init({uiState:l,helper:s,parent:n,instantSearchInstance:f,state:s.state,renderState:f.renderState,templatesConfig:f.templatesConfig,createURL:n.createURL,scopedResults:[],searchMetadata:{isSearchStalled:f._isSearchStalled}})}),s.on("change",function(e){a=It(i,{searchParameters:e.state,helper:s},e._uiState||{}),f.onStateChange||f.onInternalStateChange()})},render:function(e){var t=this,n=e.instantSearchInstance;this.getResults()&&(i.forEach(function(e){e.getRenderState&&Nt({renderState:e.getRenderState(n.renderState[t.getIndexId()]||{},{helper:t.getHelper(),parent:t,instantSearchInstance:n,results:t.getResults(),scopedResults:t.getScopedResults(),state:t.getResults()._state,renderState:n.renderState,templatesConfig:n.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:n._isSearchStalled}}),instantSearchInstance:n,parent:t})}),i.forEach(function(e){e.render&&e.render({helper:s,parent:t,instantSearchInstance:n,results:t.getResults(),scopedResults:t.getScopedResults(),state:t.getResults()._state,renderState:n.renderState,templatesConfig:n.templatesConfig,createURL:t.createURL,searchMetadata:{isSearchStalled:n._isSearchStalled}})}))},dispose:function(){i.forEach(function(e){e.dispose&&e.dispose({helper:s,state:s.state})}),o=null,c=null,s.removeAllListeners(),s=null,u.detach(),u=null},getWidgetUiState:function(e){return i.filter(Et).reduce(function(e,t){return t.getWidgetUiState(e)},jt({},e,Pt({},this.getIndexId(),a)))},getWidgetState:function(e){return"development"==="production".NODE_ENV&&ie(!1,"The `getWidgetState` method is renamed `getWidgetUiState` and will no longer exist under that name in InstantSearch.js 5.x. Please use `getWidgetUiState` instead."),this.getWidgetUiState(e)},getWidgetSearchParameters:function(e,t){return _t(i,{uiState:t.uiState,initialSearchParameters:e})},refreshUiState:function(){a=It(i,{searchParameters:this.getHelper().state,helper:this.getHelper()})}}};function Nt(e){var t=e.renderState,n=e.instantSearchInstance,r=e.parent,i=r?r.getIndexId():n.mainIndex.getIndexId();n.renderState=jt({},n.renderState,Pt({},i,jt({},n.renderState[i],{},t)))}var kt="4.11.0",Lt=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.descendantName,r=t.modifierName,i=n?"-".concat(n):"",a=r?"--".concat(r):"";return"".concat("ais","-").concat(e).concat(i).concat(a)}},Ht=Lt("Highlight");function Wt(e){var t=e.highlightedTagName,n=void 0===t?"mark":t,r=e.cssClasses,i=void 0===r?{}:r,a=(se(e.hit._highlightResult,e.attribute)||{}).value,o=void 0===a?"":a,c=Ht({descendantName:"highlighted"})+(i.highlighted?" ".concat(i.highlighted):"");return o.replace(new RegExp(Fe,"g"),"<".concat(n,' class="').concat(c,'">')).replace(new RegExp(Ee,"g"),"</".concat(n,">"))}var Mt=Lt("ReverseHighlight");function Ct(e){var t=e.highlightedTagName,n=void 0===t?"mark":t,r=e.cssClasses,i=void 0===r?{}:r,a=(se(e.hit._highlightResult,e.attribute)||{}).value,o=void 0===a?"":a,c=Mt({descendantName:"highlighted"})+(i.highlighted?" ".concat(i.highlighted):"");return De(Me(Ae(o))).replace(new RegExp(Fe,"g"),"<".concat(n,' class="').concat(c,'">')).replace(new RegExp(Ee,"g"),"</".concat(n,">"))}var Qt=Lt("Snippet");function Ut(e){var t=e.highlightedTagName,n=void 0===t?"mark":t,r=e.cssClasses,i=void 0===r?{}:r,a=(se(e.hit._snippetResult,e.attribute)||{}).value,o=void 0===a?"":a,c=Qt({descendantName:"highlighted"})+(i.highlighted?" ".concat(i.highlighted):"");return o.replace(new RegExp(Fe,"g"),"<".concat(n,' class="').concat(c,'">')).replace(new RegExp(Ee,"g"),"</".concat(n,">"))}var qt=Lt("ReverseSnippet");function Bt(e){var t=e.highlightedTagName,n=void 0===t?"mark":t,r=e.cssClasses,i=void 0===r?{}:r,a=(se(e.hit._snippetResult,e.attribute)||{}).value,o=void 0===a?"":a,c=qt({descendantName:"highlighted"})+(i.highlighted?" ".concat(i.highlighted):"");return De(Me(Ae(o))).replace(new RegExp(Fe,"g"),"<".concat(n,' class="').concat(c,'">')).replace(new RegExp(Ee,"g"),"</".concat(n,">"))}function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){return"development"==="production".NODE_ENV&&ie(!1,"`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/"),function(e){var t,n=e.method,r=e.payload;if("object"!==Vt(r))throw new Error("The insights helper expects the payload to be an object.");try{t=btoa(JSON.stringify(r))}catch(e){throw new Error("Could not JSON serialize the payload object.")}return'data-insights-method="'.concat(n,'" data-insights-payload="').concat(t,'"')}({method:e,payload:t})}function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach(function(t){Yt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e){var t=e.numberLocale;return{formatNumber:function(e,n){return Number(n(e)).toLocaleString(t)},highlight:function(e,t){try{return t(Wt(zt({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe highlight helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},reverseHighlight:function(e,t){try{return t(Ct(zt({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\n  The reverseHighlight helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}},snippet:function(e,t){try{return t(Ut(zt({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\nThe snippet helper expects a JSON object of the format:\n{ "attribute": "name", "highlightedTagName": "mark" }')}},reverseSnippet:function(e,t){try{return t(Bt(zt({},JSON.parse(e),{hit:this})))}catch(e){throw new Error('\n  The reverseSnippet helper expects a JSON object of the format:\n  { "attribute": "name", "highlightedTagName": "mark" }')}},insights:function(e,t){try{var n=JSON.parse(e);return t($t(n.method,zt({objectIDs:[this.objectID]},n.payload)))}catch(e){throw new Error('\nThe insights helper expects a JSON object of the format:\n{ "method": "method-name", "payload": { "eventName": "name of the event" } }')}}}}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach(function(t){Kt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e){return function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["configure"])}function tn(){return{stateToRoute:function(e){return Object.keys(e).reduce(function(t,n){return Zt({},t,Kt({},n,en(e[n])))},{})},routeToState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce(function(t,n){return Zt({},t,Kt({},n,en(e[n])))},{})}}}var nn=String.prototype.replace,rn=/%20/g,an="RFC3986",on={default:an,formatters:{RFC1738:function(e){return nn.call(e,rn,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:an},cn=Object.prototype.hasOwnProperty,sn=Array.isArray,un=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),fn=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},ln={arrayToObject:fn,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var i=t[r],a=i.obj[i.prop],o=Object.keys(a),c=0;c<o.length;++c){var s=o[c],u=a[s];"object"==typeof u&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:a,prop:s}),n.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(sn(n)){for(var r=[],i=0;i<n.length;++i)void 0!==n[i]&&r.push(n[i]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n,r,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===n)return escape(a).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var o="",c=0;c<a.length;++c){var s=a.charCodeAt(c);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||i===on.RFC1738&&(40===s||41===s)?o+=a.charAt(c):s<128?o+=un[s]:s<2048?o+=un[192|s>>6]+un[128|63&s]:s<55296||s>=57344?o+=un[224|s>>12]+un[128|s>>6&63]+un[128|63&s]:(s=65536+((1023&s)<<10|1023&a.charCodeAt(c+=1)),o+=un[240|s>>18]+un[128|s>>12&63]+un[128|s>>6&63]+un[128|63&s])}return o},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(sn(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},merge:function e(t,n,r){if(!n)return t;if("object"!=typeof n){if(sn(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(r&&(r.plainObjects||r.allowPrototypes)||!cn.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var i=t;return sn(t)&&!sn(n)&&(i=fn(t,r)),sn(t)&&sn(n)?(n.forEach(function(n,i){if(cn.call(t,i)){var a=t[i];a&&"object"==typeof a&&n&&"object"==typeof n?t[i]=e(a,n,r):t.push(n)}else t[i]=n}),t):Object.keys(n).reduce(function(t,i){var a=n[i];return t[i]=cn.call(t,i)?e(t[i],a,r):a,t},i)}},hn=Object.prototype.hasOwnProperty,dn={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},gn=Array.isArray,pn=Array.prototype.push,mn=function(e,t){pn.apply(e,gn(t)?t:[t])},vn=Date.prototype.toISOString,yn=on.default,bn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ln.encode,encodeValuesOnly:!1,format:yn,formatter:on.formatters[yn],indices:!1,serializeDate:function(e){return vn.call(e)},skipNulls:!1,strictNullHandling:!1},On=function e(t,n,r,i,a,o,c,s,u,f,l,h,d,g){var p,m=t;if("function"==typeof c?m=c(n,m):m instanceof Date?m=f(m):"comma"===r&&gn(m)&&(m=ln.maybeMap(m,function(e){return e instanceof Date?f(e):e})),null===m){if(i)return o&&!d?o(n,bn.encoder,g,"key",l):n;m=""}if("string"==typeof(p=m)||"number"==typeof p||"boolean"==typeof p||"symbol"==typeof p||"bigint"==typeof p||ln.isBuffer(m))return o?[h(d?n:o(n,bn.encoder,g,"key",l))+"="+h(o(m,bn.encoder,g,"value",l))]:[h(n)+"="+h(String(m))];var v,y=[];if(void 0===m)return y;if("comma"===r&&gn(m))v=[{value:m.length>0?m.join(",")||null:void 0}];else if(gn(c))v=c;else{var b=Object.keys(m);v=s?b.sort(s):b}for(var O=0;O<v.length;++O){var w=v[O],S="object"==typeof w&&void 0!==w.value?w.value:m[w];if(!a||null!==S){var j=gn(m)?"function"==typeof r?r(n,w):n:n+(u?"."+w:"["+w+"]");mn(y,e(S,j,r,i,a,o,c,s,u,f,l,h,d,g))}}return y},wn=Object.prototype.hasOwnProperty,Sn=Array.isArray,jn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ln.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Pn=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},Rn=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},Fn=function(e,t,n,r){if(e){var i=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,o=n.depth>0&&/(\[[^[\]]*])/.exec(i),c=o?i.slice(0,o.index):i,s=[];if(c){if(!n.plainObjects&&wn.call(Object.prototype,c)&&!n.allowPrototypes)return;s.push(c)}for(var u=0;n.depth>0&&null!==(o=a.exec(i))&&u<n.depth;){if(u+=1,!n.plainObjects&&wn.call(Object.prototype,o[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(o[1])}return o&&s.push("["+i.slice(o.index)+"]"),function(e,t,n,r){for(var i=r?t:Rn(t,n),a=e.length-1;a>=0;--a){var o,c=e[a];if("[]"===c&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var s="["===c.charAt(0)&&"]"===c.charAt(c.length-1)?c.slice(1,-1):c,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&c!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=i:o[s]=i:o={0:i}}i=o}return i}(s,t,n,r)}},En={formats:on,parse:function(e,t){var n=function(e){if(!e)return jn;if(null!=e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");return{allowDots:void 0===e.allowDots?jn.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:jn.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:jn.arrayLimit,charset:void 0===e.charset?jn.charset:e.charset,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:jn.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:jn.comma,decoder:"function"==typeof e.decoder?e.decoder:jn.decoder,delimiter:"string"==typeof e.delimiter||ln.isRegExp(e.delimiter)?e.delimiter:jn.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:jn.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:jn.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:jn.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:jn.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:jn.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){var n,r={},i=(t.ignoreQueryPrefix?e.replace(/^\?/,""):e).split(t.delimiter,Infinity===t.parameterLimit?void 0:t.parameterLimit),a=-1,o=t.charset;if(t.charsetSentinel)for(n=0;n<i.length;++n)0===i[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===i[n]?o="utf-8":"utf8=%26%2310003%3B"===i[n]&&(o="iso-8859-1"),a=n,n=i.length);for(n=0;n<i.length;++n)if(n!==a){var c,s,u=i[n],f=u.indexOf("]="),l=-1===f?u.indexOf("="):f+1;-1===l?(c=t.decoder(u,jn.decoder,o,"key"),s=t.strictNullHandling?null:""):(c=t.decoder(u.slice(0,l),jn.decoder,o,"key"),s=ln.maybeMap(Rn(u.slice(l+1),t),function(e){return t.decoder(e,jn.decoder,o,"value")})),s&&t.interpretNumericEntities&&"iso-8859-1"===o&&(s=Pn(s)),u.indexOf("[]=")>-1&&(s=Sn(s)?[s]:s),r[c]=wn.call(r,c)?ln.combine(r[c],s):s}return r}(e,n):e,i=n.plainObjects?Object.create(null):{},a=Object.keys(r),o=0;o<a.length;++o){var c=a[o],s=Fn(c,r[c],n,"string"==typeof e);i=ln.merge(i,s,n)}return ln.compact(i)},stringify:function(e,t){var n,r=e,i=function(e){if(!e)return bn;if(null!=e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||bn.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=on.default;if(void 0!==e.format){if(!hn.call(on.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=on.formatters[n],i=bn.filter;return("function"==typeof e.filter||gn(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:bn.addQueryPrefix,allowDots:void 0===e.allowDots?bn.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:bn.charsetSentinel,delimiter:void 0===e.delimiter?bn.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:bn.encode,encoder:"function"==typeof e.encoder?e.encoder:bn.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:bn.encodeValuesOnly,filter:i,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:bn.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:bn.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:bn.strictNullHandling}}(t);"function"==typeof i.filter?r=(0,i.filter)("",r):gn(i.filter)&&(n=i.filter);var a=[];if("object"!=typeof r||null===r)return"";var o=dn[t&&t.arrayFormat in dn?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices"];n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var c=0;c<n.length;++c){var s=n[c];i.skipNulls&&null===r[s]||mn(a,On(r[s],s,o,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset))}var u=a.join(i.delimiter),f=!0===i.addQueryPrefix?"?":"";return i.charsetSentinel&&(f+="iso-8859-1"===i.charset?"utf8=%26%2310003%3B&":"utf8=%E2%9C%93&"),u.length>0?f+u:""}};function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _n=function(e){var t=e.location,n=t.protocol,r=t.hostname,i=t.port,a=void 0===i?"":i,o=t.pathname,c=t.hash,s=e.qsModule.stringify(e.routeState),u=""===a?"":":".concat(a);return s?"".concat(n,"//").concat(r).concat(u).concat(o,"?").concat(s).concat(c):"".concat(n,"//").concat(r).concat(u).concat(o).concat(c)},Tn=function(e){return e.qsModule.parse(e.location.search.slice(1),{arrayLimit:99})},Dn=function(e){e&&(window.document.title=e)},An=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.windowTitle,r=t.writeDelay,i=void 0===r?400:r,a=t.createURL,o=void 0===a?_n:a,c=t.parseURL,s=void 0===c?Tn:c;xn(this,e),In(this,"windowTitle",void 0),In(this,"writeDelay",void 0),In(this,"_createURL",void 0),In(this,"parseURL",void 0),In(this,"writeTimer",void 0),this.windowTitle=n,this.writeTimer=void 0,this.writeDelay=i,this._createURL=o,this.parseURL=s;var u=this.windowTitle&&this.windowTitle(this.read());Dn(u)}var t;return(t=[{key:"read",value:function(){return this.parseURL({qsModule:En,location:window.location})}},{key:"write",value:function(e){var t=this,n=this.createURL(e),r=this.windowTitle&&this.windowTitle(e);this.writeTimer&&window.clearTimeout(this.writeTimer),this.writeTimer=window.setTimeout(function(){Dn(r),window.history.pushState(e,r||"",n),t.writeTimer=void 0},this.writeDelay)}},{key:"onUpdate",value:function(e){var t=this;this._onPopState=function(n){t.writeTimer&&(window.clearTimeout(t.writeTimer),t.writeTimer=void 0),e(n.state||t.read())},window.addEventListener("popstate",this._onPopState)}},{key:"createURL",value:function(e){return this._createURL({qsModule:En,routeState:e,location:window.location})}},{key:"dispose",value:function(){this._onPopState&&window.removeEventListener("popstate",this._onPopState),this.writeTimer&&window.clearTimeout(this.writeTimer),this.write({})}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function Nn(e){return new An(e)}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach(function(t){Hn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e){return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qn=rt({name:"instantsearch"});function Bn(){return"#"}var Vn=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==Wn(t)&&"function"!=typeof t?Cn(e):t}(this,Mn(t).call(this)),Un(Cn(n),"client",void 0),Un(Cn(n),"indexName",void 0),Un(Cn(n),"insightsClient",void 0),Un(Cn(n),"onStateChange",null),Un(Cn(n),"helper",void 0),Un(Cn(n),"mainHelper",void 0),Un(Cn(n),"mainIndex",void 0),Un(Cn(n),"started",void 0),Un(Cn(n),"templatesConfig",void 0),Un(Cn(n),"renderState",{}),Un(Cn(n),"_stalledSearchDelay",void 0),Un(Cn(n),"_searchStalledTimer",void 0),Un(Cn(n),"_isSearchStalled",void 0),Un(Cn(n),"_initialUiState",void 0),Un(Cn(n),"_createURL",void 0),Un(Cn(n),"_searchFunction",void 0),Un(Cn(n),"_mainHelperSearch",void 0),Un(Cn(n),"middleware",[]),Un(Cn(n),"sendEventToInsights",void 0),Un(Cn(n),"scheduleSearch",$(function(){n.started&&n.mainHelper.search()})),Un(Cn(n),"scheduleRender",$(function(){n.mainHelper.hasPendingRequests()||(clearTimeout(n._searchStalledTimer),n._searchStalledTimer=null,n._isSearchStalled=!1),n.mainIndex.render({instantSearchInstance:Cn(n)}),n.emit("render")})),Un(Cn(n),"onInternalStateChange",function(){var e=n.mainIndex.getWidgetUiState({});n.middleware.forEach(function(t){t.onStateChange({uiState:e})})});var r=e.indexName,i=void 0===r?null:r,a=e.numberLocale,o=e.initialUiState,c=void 0===o?{}:o,s=e.routing,u=void 0===s?null:s,f=e.searchFunction,l=e.stalledSearchDelay,h=void 0===l?200:l,d=e.searchClient,g=void 0===d?null:d,p=e.insightsClient,m=void 0===p?null:p,v=e.onStateChange,y=void 0===v?null:v;if(null===i)throw new Error(qn("The `indexName` option is required."));if(null===g)throw new Error(qn("The `searchClient` option is required."));if("function"!=typeof g.search)throw new Error("The `searchClient` must implement a `search` method.\n\nSee: https://www.algolia.com/doc/guides/building-search-ui/going-further/backend-search/in-depth/backend-instantsearch/js/");if("function"==typeof g.addAlgoliaAgent&&g.addAlgoliaAgent("instantsearch.js (".concat(kt,")")),"development"==="production".NODE_ENV&&ie(null===m,"`insightsClient` property has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/"),m&&"function"!=typeof m)throw new Error(qn("The `insightsClient` option should be a function."));return"development"==="production".NODE_ENV&&ie(!e.searchParameters,"The `searchParameters` option is deprecated and will not be supported in InstantSearch.js 4.x.\n\nYou can replace it with the `configure` widget:\n\n```\nsearch.addWidgets([\n  configure(".concat(JSON.stringify(e.searchParameters,null,2),")\n]);\n```\n\nSee ").concat(nt({name:"configure"}))),n.client=g,n.insightsClient=m,n.indexName=i,n.helper=null,n.mainHelper=null,n.mainIndex=At({indexName:i}),n.onStateChange=y,n.started=!1,n.templatesConfig={helpers:Gt({numberLocale:a}),compileOptions:{}},n._stalledSearchDelay=h,n._searchStalledTimer=null,n._isSearchStalled=!1,n._createURL=Bn,n._initialUiState=c,f&&(n._searchFunction=f),n.sendEventToInsights=ne,u&&n.use(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.router,n=void 0===t?Nn():t,r=e.stateMapping,i=void 0===r?tn():r;return function(e){var t=e.instantSearchInstance;t._createURL=function(e){var r=Object.keys(e).reduce(function(t,n){return Ln({},t,Hn({},n,e[n]))},t.mainIndex.getWidgetUiState({})),a=i.stateToRoute(r);return n.createURL(a)},t._initialUiState=Ln({},t._initialUiState,{},i.routeToState(n.read()));var r=void 0;return{onStateChange:function(e){var t=i.stateToRoute(e.uiState);void 0!==r&&ge(r,t)||(n.write(t),r=t)},subscribe:function(){n.onUpdate(function(e){t.setUiState(i.routeToState(e))})},unsubscribe:function(){n.dispose()}}}}("boolean"==typeof u?void 0:u)),n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(t,e),(n=[{key:"use",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(function(t){var n=t({instantSearchInstance:e});return e.middleware.push(n),n});return this.started&&i.forEach(function(e){e.subscribe()}),this}},{key:"EXPERIMENTAL_use",value:function(){return"development"==="production".NODE_ENV&&ie(!1,"The middleware API is now considered stable, so we recommend replacing `EXPERIMENTAL_use` with `use` before upgrading to the next major version."),this.use.apply(this,arguments)}},{key:"addWidget",value:function(e){return"development"==="production".NODE_ENV&&ie(!1,"addWidget will still be supported in 4.x releases, but not further. It is replaced by `addWidgets([widget])`"),this.addWidgets([e])}},{key:"addWidgets",value:function(e){if(!Array.isArray(e))throw new Error(qn("The `addWidgets` method expects an array of widgets. Please use `addWidget`."));if(e.some(function(e){return"function"!=typeof e.init&&"function"!=typeof e.render}))throw new Error(qn("The widget definition expects a `render` and/or an `init` method."));return this.mainIndex.addWidgets(e),this}},{key:"removeWidget",value:function(e){return"development"==="production".NODE_ENV&&ie(!1,"removeWidget will still be supported in 4.x releases, but not further. It is replaced by `removeWidgets([widget])`"),this.removeWidgets([e])}},{key:"removeWidgets",value:function(e){if(!Array.isArray(e))throw new Error(qn("The `removeWidgets` method expects an array of widgets. Please use `removeWidget`."));if(e.some(function(e){return"function"!=typeof e.dispose}))throw new Error(qn("The widget definition expects a `dispose` method."));return this.mainIndex.removeWidgets(e),this}},{key:"start",value:function(){var e=this;if(this.started)throw new Error(qn("The `start` method has already been called once."));var t=q(this.client,this.indexName);if(t.search=function(){return t.searchOnlyWithDerivedHelpers()},this._searchFunction){var n={search:function(){return new Promise(ne)}};this._mainHelperSearch=t.search.bind(t),t.search=function(){var r=e.mainIndex.getHelper(),i=q(n,r.state.index,r.state);return i.once("search",function(t){r.overrideStateWithoutTriggeringChangeEvent(t.state),e._mainHelperSearch()}),i.on("change",function(e){r.setState(e.state)}),e._searchFunction(i),t}}t.on("error",function(t){e.emit("error",{error:t.error})}),this.mainHelper=t,this.mainIndex.init({instantSearchInstance:this,parent:null,uiState:this._initialUiState}),this.middleware.forEach(function(e){e.subscribe()}),t.search(),this.helper=this.mainIndex.getHelper(),this.started=!0}},{key:"dispose",value:function(){this.scheduleSearch.cancel(),this.scheduleRender.cancel(),clearTimeout(this._searchStalledTimer),this.removeWidgets(this.mainIndex.getWidgets()),this.mainIndex.dispose(),this.started=!1,this.removeAllListeners(),this.mainHelper.removeAllListeners(),this.mainHelper=null,this.helper=null,this.middleware.forEach(function(e){e.unsubscribe()})}},{key:"scheduleStalledRender",value:function(){var e=this;this._searchStalledTimer||(this._searchStalledTimer=setTimeout(function(){e._isSearchStalled=!0,e.scheduleRender()},this._stalledSearchDelay))}},{key:"setUiState",value:function(e){if(!this.mainHelper)throw new Error(qn("The `start` method needs to be called before `setUiState`."));this.mainIndex.refreshUiState();var t="function"==typeof e?e(this.mainIndex.getWidgetUiState({})):e;!function e(n){"development"==="production".NODE_ENV&&ce({index:n,indexUiState:t[n.getIndexId()]}),n.getHelper().overrideStateWithoutTriggeringChangeEvent(n.getWidgetSearchParameters(n.getHelper().state,{uiState:t[n.getIndexId()]})),n.getWidgets().filter(Et).forEach(e)}(this.mainIndex),this.scheduleSearch(),this.onInternalStateChange()}},{key:"createURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.started)throw new Error(qn("The `start` method needs to be called before `createURL`."));return this._createURL(e)}},{key:"refresh",value:function(){if(!this.mainHelper)throw new Error(qn("The `start` method needs to be called before `refresh`."));this.mainHelper.clearCache().search()}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,n),t}(I);function $n(e){return function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e||{},["page"])}var Jn="ais.infiniteHits";function zn(){return"undefined"!=typeof window&&void 0!==window.sessionStorage}var Yn=function(e){return new Vn(e)};function Gn(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach(function(t){Kn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Yn.version=kt,Yn.snippet=Ut,Yn.reverseSnippet=Bt,Yn.highlight=Wt,Yn.reverseHighlight=Ct,Yn.insights=$t,Yn.getInsightsAnonymousUserToken=function(){return"development"==="production".NODE_ENV&&ie(!1,"`getInsightsAnonymousUserToken` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/"),function(e){for(var t="".concat("_ALGOLIA","="),n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1);if(0===i.indexOf(t))return i.substring(t.length,i.length)}}()},Yn.createInfiniteHitsSessionStorageCache=function(){return{read:function(e){var t=e.state;if(!zn())return null;try{var n=JSON.parse(window.sessionStorage.getItem(Jn));return n&&ge(n.state,$n(t))?n.hits:null}catch(e){if(e instanceof SyntaxError)try{window.sessionStorage.removeItem(Jn)}catch(e){}return null}},write:function(e){var t=e.state,n=e.hits;if(zn())try{window.sessionStorage.setItem(Jn,JSON.stringify({state:$n(t),hits:n}))}catch(e){}}}},Object.defineProperty(Yn,"widgets",{get:function(){throw new ReferenceError("\"instantsearch.widgets\" are not available from the ES build.\n\nTo import the widgets:\n\nimport { searchBox } from 'instantsearch.js/es/widgets'")}}),Object.defineProperty(Yn,"connectors",{get:function(){throw new ReferenceError("\"instantsearch.connectors\" are not available from the ES build.\n\nTo import the connectors:\n\nimport { connectSearchBox } from 'instantsearch.js/es/connectors'")}});var er=rt({name:"clear-refinements",connector:!0});function tr(e){var t=e.scopedResult,n=e.includedAttributes,r=e.excludedAttributes,i=e.transformItems,a=-1!==n.indexOf("query")||-1===r.indexOf("query");return{helper:t.helper,items:i(J(X(t.results,t.helper.state,a).map(function(e){return e.attribute}).filter(function(e){return 0===n.length||-1!==n.indexOf(e)}).filter(function(e){return"query"===e&&a||-1===r.indexOf(e)})))}}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach(function(t){ir(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ar=rt({name:"current-refinements",connector:!0});function or(e){var t=e.results,n=e.helper,r=e.includedAttributes,i=e.excludedAttributes,a=-1!==(r||[]).indexOf("query")||-1===(i||[]).indexOf("query"),o=r?function(e){return-1!==r.indexOf(e.attribute)}:function(e){return-1===i.indexOf(e.attribute)},c=X(t,n.state,a).map(ur).filter(o);return c.reduce(function(e,t){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(r=e.filter(function(e){return e.attribute!==t.attribute}))||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}(),[{indexName:n.state.index,attribute:t.attribute,label:t.attribute,refinements:c.filter(function(e){return e.attribute===t.attribute}).sort(function(e,t){return"numeric"===e.type?e.value-t.value:0}),refine:function(e){return sr(n,e)}}]);var r},[])}function cr(e,t){switch(t.type){case"facet":return e.removeFacetRefinement(t.attribute,String(t.value));case"disjunctive":return e.removeDisjunctiveFacetRefinement(t.attribute,String(t.value));case"hierarchical":return e.removeHierarchicalFacetRefinement(t.attribute);case"exclude":return e.removeExcludeRefinement(t.attribute,String(t.value));case"numeric":return e.removeNumericRefinement(t.attribute,t.operator,String(t.value));case"tag":return e.removeTagRefinement(String(t.value));case"query":return e.setQueryParameter("query","");default:return"development"==="production".NODE_ENV&&ie(!1,'The refinement type "'.concat(t.type,'" does not exist and cannot be cleared from the current refinements.')),e}}function sr(e,t){e.setState(cr(e.state,t)).search()}function ur(e){var t="numeric"===e.type?Number(e.name):e.name,n=e.operator?"".concat(function(e){switch(e){case">=":return"";case"<=":return"";default:return e}}(e.operator)," ").concat(e.name):e.name,r={attribute:e.attribute,type:e.type,value:t,label:n};return void 0!==e.operator&&(r.operator=e.operator),void 0!==e.count&&(r.count=e.count),void 0!==e.exhaustive&&(r.exhaustive=e.exhaustive),r}function fr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lr(Object(n),!0).forEach(function(t){dr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var pr=rt({name:"hierarchical-menu",connector:!0});function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach(function(t){yr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var br=rt({name:"hits",connector:!0}),Or=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,br()),function(n){var r,i,a=n||{},o=a.escapeHTML,c=void 0===o||o,s=a.transformItems,u=void 0===s?function(e){return e}:s;return{$$type:"ais.hits",init:function(t){e(vr({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!0)},render:function(t){var n=this.getWidgetRenderState(t);n.sendEvent("view",n.hits),e(vr({},n,{instantSearchInstance:t.instantSearchInstance}),!1)},getRenderState:function(e,t){return vr({},e,{hits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,a=e.helper;if(r||(r=bt({instantSearchInstance:e.instantSearchInstance,index:a.getIndex(),widgetType:this.$$type})),i||(i=Ot({index:a.getIndex(),widgetType:this.$$type})),!t)return{hits:[],results:void 0,sendEvent:r,bindEvent:i,widgetParams:n};c&&t.hits.length>0&&(t.hits=_e(t.hits));var o=t.hits.__escaped;return t.hits=ft(t.hits,t.page,t.hitsPerPage),t.hits=dt(t.hits,t.queryID),t.hits=u(t.hits),t.hits.__escaped=o,{hits:t.hits,results:t,sendEvent:r,bindEvent:i,widgetParams:n}},dispose:function(e){var n=e.state;return t(),c?n.setQueryParameters(Object.keys(Re).reduce(function(e,t){return vr({},e,yr({},t,void 0))},{})):n},getWidgetSearchParameters:function(e){return c?e.setQueryParameters(Re):e}}}};function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach(function(t){jr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pr(e){return function(t,n){return e(function(e){return function(t,n){var r=t.results,i=t.hits,a=t.instantSearchInstance;if(r&&i&&a){var o=function(e,t,n){return function(r,i){if("development"==="production".NODE_ENV&&ie(!1,"`insights` function has been deprecated. It is still supported in 4.x releases, but not further. It is replaced by the `insights` middleware.\n\nFor more information, visit https://www.algolia.com/doc/guides/getting-insights-and-analytics/search-analytics/click-through-and-conversions/how-to/send-click-and-conversion-events-with-instantsearch/js/"),!e){var a=rt({name:"instantsearch"});throw new Error(a("The `insightsClient` option has not been provided to `instantsearch`."))}if(!Array.isArray(i.objectIDs))throw new TypeError("Expected `objectIDs` to be an array.");var o=function(e){var t,n=e.method,r=e.objectIDs,i=e.results.index,a=(t=e.hits,r.map(function(e){var n=z(t,function(t){return t.objectID===e});if(void 0===n)throw new Error('Could not find objectID "'.concat(e,'" passed to `clickedObjectIDsAfterSearch` in the returned hits. This is necessary to infer the absolute position and the query ID.'));return n})),o=function(e){var t=J(e.map(function(e){return e.__queryID}));if(t.length>1)throw new Error("Insights currently allows a single `queryID`. The `objectIDs` provided map to multiple `queryID`s.");var n=t[0];if("string"!=typeof n)throw new Error("Could not infer `queryID`. Ensure InstantSearch `clickAnalytics: true` was added with the Configure widget.\n\nSee: https://alg.li/lNiZZ7");return n}(a);switch(n){case"clickedObjectIDsAfterSearch":return{index:i,queryID:o,objectIDs:r,positions:function(e){return e.map(function(e){return e.__position})}(a)};case"convertedObjectIDsAfterSearch":return{index:i,queryID:o,objectIDs:r};default:throw new Error('Unsupported method passed to insights: "'.concat(n,'".'))}}({method:r,results:t,hits:n,objectIDs:i.objectIDs});e(r,Sr({},o,{},i))}}(a.insightsClient,r,i);return e(Sr({},t,{insights:o}),n)}return e(t,n)}}(t),n)}}var Rr=Pr(Or);function Fr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(t){Ir(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r=rt({name:"hits-per-page",connector:!0});function Tr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(n),!0).forEach(function(t){Ar(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nr(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var kr=rt({name:"infinite-hits",connector:!0});function Lr(e){return function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e||{},["page"])}function Hr(){var e=null,t=void 0;return{read:function(n){return ge(t,Lr(n.state))?e:null},write:function(n){var r=n.hits;t=Lr(n.state),e=r}}}function Wr(e){return Object.keys(e).map(Number).sort(function(e,t){return e-t}).reduce(function(t,n){return t.concat(e[n])},[])}var Mr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,kr()),function(n){var r,i,a,o,c=n||{},s=c.escapeHTML,u=void 0===s||s,f=c.transformItems,l=void 0===f?function(e){return e}:f,h=c.cache,d=void 0===h?Hr():h,g=function(e,t){var n=e.page,r=void 0===n?0:n,i=Object.keys(t).map(Number);return 0===i.length?r:Math.min.apply(Math,[r].concat(Nr(i)))},p=function(e,t){var n=e.page,r=void 0===n?0:n,i=Object.keys(t).map(Number);return 0===i.length?r:Math.max.apply(Math,[r].concat(Nr(i)))};return{$$type:"ais.infiniteHits",init:function(t){e(Dr({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!0)},render:function(t){var n=t.instantSearchInstance,r=this.getWidgetRenderState(t);a("view",r.currentPageHits),e(Dr({},r,{instantSearchInstance:n}),!1)},getRenderState:function(e,t){return Dr({},e,{infiniteHits:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,c=e.results,s=e.helper,f=e.state,h=e.instantSearchInstance,m=[],v=d.read({state:f})||{};if(c){var y=f.page,b=void 0===y?0:y;u&&c.hits.length>0&&(c.hits=_e(c.hits));var O=c.hits.__escaped;c.hits=ft(c.hits,c.page,c.hitsPerPage),c.hits=dt(c.hits,c.queryID),c.hits=l(c.hits),c.hits.__escaped=O,void 0===v[b]&&(v[b]=c.hits,d.write({state:f,hits:v})),m=c.hits,t=0===g(f,v)}else r=function(e,t){return function(){e.overrideStateWithoutTriggeringChangeEvent(Dr({},e.state,{page:g(e.state,t)-1})).searchWithoutTriggeringOnStateChange()}}(s,v),i=function(e,t){return function(){e.setPage(p(e.state,t)+1).search()}}(s,v),a=bt({instantSearchInstance:h,index:s.getIndex(),widgetType:this.$$type}),o=Ot({index:s.getIndex(),widgetType:this.$$type}),t=void 0===s.state.page||0===g(s.state,v);var w=Wr(v),S=!c||c.nbPages<=p(f,v)+1;return{hits:w,currentPageHits:m,sendEvent:a,bindEvent:o,results:c,showPrevious:r,showMore:i,isFirstPage:t,isLastPage:S,widgetParams:n}},dispose:function(e){var n=e.state;t();var r=n.setQueryParameter("page",void 0);return u?r.setQueryParameters(Object.keys(Re).reduce(function(e,t){return Dr({},e,Ar({},t,void 0))},{})):r},getWidgetUiState:function(e,t){var n=t.searchParameters.page||0;return n?Dr({},e,{page:n+1}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e;return u&&(r=e.setQueryParameters(Re)),r.setQueryParameter("page",n.page?n.page-1:0)}}}},Cr=Pr(Mr);function Qr(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Br(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach(function(t){Vr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Vr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $r=rt({name:"menu",connector:!0});function Jr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach(function(t){Gr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Gr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xr=rt({name:"numeric-menu",connector:!0}),Zr="ais.numericMenu",Kr=function(e){var t=e.instantSearchInstance,n=e.helper,r=e.attribute;return function(){for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];if(1!==i.length){var o=i[0],c=i[1],s=i[2],u=void 0===s?"Filter Applied":s;if("click"===o){var f=wt(ti(n.state,r,c),r);f&&f.length>0&&t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Zr,eventType:o,payload:{eventName:u,index:n.getIndex(),filters:f}})}}else t.sendEventToInsights(i[0])}};function ei(e,t,n){var r=e.getNumericRefinements(t);return void 0!==n.start&&void 0!==n.end&&n.start===n.end?ni(r,"=",n.start):void 0!==n.start?ni(r,">=",n.start):void 0!==n.end?ni(r,"<=",n.end):void 0===n.start&&void 0===n.end&&Object.keys(r).every(function(e){return 0===(r[e]||[]).length})}function ti(e,t,n){var r=e,i=JSON.parse(window.decodeURI(n)),a=r.getNumericRefinements(t);if(void 0===i.start&&void 0===i.end)return r.removeNumericRefinement(t);if(ei(r,t,i)||(r=r.removeNumericRefinement(t)),void 0!==i.start&&void 0!==i.end){if(i.start>i.end)throw new Error("option.start should be > to option.end");if(i.start===i.end)return ni(a,"=",i.start)?r.removeNumericRefinement(t,"=",i.start):r.addNumericRefinement(t,"=",i.start)}return void 0!==i.start&&(r=ni(a,">=",i.start)?r.removeNumericRefinement(t,">=",i.start):r.addNumericRefinement(t,">=",i.start)),void 0!==i.end&&(r=ni(a,"<=",i.end)?r.removeNumericRefinement(t,"<=",i.end):r.addNumericRefinement(t,"<=",i.end)),"number"==typeof r.page&&(r.page=0),r}function ni(e,t,n){return void 0!==e[t]&&e[t].includes(n)}function ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ii=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ri(this,"currentPage",void 0),ri(this,"total",void 0),ri(this,"padding",void 0),this.currentPage=t.currentPage,this.total=t.total,this.padding=t.padding}var t;return(t=[{key:"pages",value:function(){var e=this.total,t=this.currentPage,n=this.padding;if(0===e)return[0];var r=this.nbPagesDisplayed(n,e);if(r===e)return he({end:e});var i=this.calculatePaddingLeft(t,n,e,r);return he({start:t-i,end:t+(r-i)})}},{key:"nbPagesDisplayed",value:function(e,t){return Math.min(2*e+1,t)}},{key:"calculatePaddingLeft",value:function(e,t,n,r){return e<=t?e:e>=n-t?r-(n-e):t}},{key:"isLastPage",value:function(){return this.currentPage===this.total-1||0===this.total}},{key:"isFirstPage",value:function(){return 0===this.currentPage}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach(function(t){ci(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si=rt({name:"pagination",connector:!0});function ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(n),!0).forEach(function(t){li(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var di=rt({name:"range-input",connector:!0},{name:"range-slider",connector:!0}),gi="ais.range";function pi(e){var t=e.min,n=e.max,r=Math.pow(10,e.precision);return{min:t?Math.floor(t*r)/r:t,max:n?Math.ceil(n*r)/r:n}}function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach(function(t){yi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Oi=rt({name:"refinement-list",connector:!0});function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach(function(t){ji(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pi=rt({name:"search-box",connector:!0});function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach(function(t){Ei(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ei(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xi=rt({name:"sort-by",connector:!0});function Ii(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ii(Object(n),!0).forEach(function(t){Ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ii(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ti(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ai=rt({name:"rating-menu",connector:!0}),Ni="ais.ratingMenu",ki=function(e){var t=e.instantSearchInstance,n=e.helper,r=e.getRefinedStar,i=e.attribute;return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];if(1!==a.length){var c=a[0],s=a[1],u=a[2],f=void 0===u?"Filter Applied":u;if("click"===c){var l=r()===Number(s);l||t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Ni,eventType:c,payload:{eventName:f,index:n.getIndex(),filters:["".concat(i,">=").concat(s)]}})}}else t.sendEventToInsights(a[0])}};function Li(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(n),!0).forEach(function(t){Wi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Li(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mi=rt({name:"stats",connector:!0});function Ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ci(Object(n),!0).forEach(function(t){Ui(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ci(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ui(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qi=rt({name:"toggle-refinement",connector:!0}),Bi="ais.toggleRefinement",Vi=function(e){var t=e.instantSearchInstance,n=e.attribute,r=e.on,i=e.helper;return function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];if(1!==a.length){var c=a[0],s=a[1],u=a[2],f=void 0===u?"Filter Applied":u;"click"===c&&void 0!==r&&(s||t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:Bi,eventType:c,payload:{eventName:f,index:i.getIndex(),filters:r.map(function(e){return"".concat(n,":").concat(e)})}}))}else t.sendEventToInsights(a[0])}};function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ji(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach(function(t){zi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Gi=rt({name:"breadcrumb",connector:!0});function Xi(e){return e.reduce(function(e,t){return t.isRefined&&(e.push({label:t.name,value:t.path}),Array.isArray(t.data)&&(e=e.concat(Xi(t.data)))),e},[])}function Zi(e){return e.map(function(t,n){return{label:t.label,value:n+1===e.length?null:e[n+1].value}})}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach(function(t){ta(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var na=rt({name:"geo-search",connector:!0}),ra="ais.geoSearch";function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach(function(t){oa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function oa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ca=rt({name:"powered-by",connector:!0});function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach(function(t){fa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var la=rt({name:"configure",connector:!0});function ha(e,t){return e.setQueryParameters(Object.keys(t.searchParameters).reduce(function(e,t){return ua({},e,fa({},t,void 0))},{}))}var da=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return function(n){if(!n||!le(n.searchParameters))throw new Error(la("The `searchParameters` option expects an object."));var r={};return{$$type:"ais.configure",init:function(t){var n=t.instantSearchInstance;e(ua({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(ua({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var r=e.state;return t(),ha(r,n)},getRenderState:function(e,t){var n,r=this.getWidgetRenderState(t);return ua({},e,{configure:ua({},r,{widgetParams:ua({},r.widgetParams,{searchParameters:et(new q.SearchParameters(null===(n=e.configure)||void 0===n?void 0:n.widgetParams.searchParameters),new q.SearchParameters(r.widgetParams.searchParameters)).getQueryParams()})})})},getWidgetRenderState:function(e){return r.refine||(r.refine=(t=e.helper,function(e){var r=ha(t.state,n),i=et(r,new q.SearchParameters(e));n.searchParameters=e,t.setState(i).search()})),{refine:r.refine,widgetParams:n};var t},getWidgetSearchParameters:function(e,t){return et(e,new q.SearchParameters(ua({},t.uiState.configure,{},n.searchParameters)))},getWidgetUiState:function(e){return ua({},e,{configure:ua({},e.configure,{},n.searchParameters)})}}}};function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(n),!0).forEach(function(t){ma(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ma(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function va(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ya=rt({name:"configure-related-items",connector:!0});function ba(e){var t=e.attributeValue,n=e.attributeScore;return"".concat(e.attributeName,":").concat(t,"<score=").concat(n||1,">")}function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function wa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach(function(t){Sa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ja=rt({name:"autocomplete",connector:!0});function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach(function(t){Fa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Fa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ea(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var xa=rt({name:"query-rules",connector:!0});function Ia(e){return[e.disjunctiveFacetsRefinements,e.facetsRefinements,e.hierarchicalFacetsRefinements,e.numericRefinements].some(function(e){return Boolean(e&&Object.keys(e).length>0)})}function _a(e){var t=this.helper,n=this.initialRuleContexts,r=this.transformRuleContexts,i=e.state,a=i.ruleContexts||[],o=function(e){var t=e.helper,n=e.sharedHelperState,r=e.trackedFilters;return Object.keys(r).reduce(function(e,i){var a=X(t.lastResults||{},n).filter(function(e){return e.attribute===i}).map(function(e){return e.numericValue||e.name}),o=(0,r[i])(a);return[].concat(Ea(e),Ea(a.filter(function(e){return o.includes(e)}).map(function(e){return"ais-".concat(i,"-").concat(e).replace(/[^a-z0-9-_]+/gi,"_")})))},[])}({helper:t,sharedHelperState:i,trackedFilters:this.trackedFilters}),c=[].concat(Ea(n),Ea(o));"development"==="production".NODE_ENV&&ie(c.length<=10,"\nThe maximum number of `ruleContexts` is 10. They have been sliced to that limit.\nConsider using `transformRuleContexts` to minimize the number of rules sent to Algolia.\n");var s=r(c).slice(0,10);ge(a,s)||t.overrideStateWithoutTriggeringChangeEvent(Ra({},i,{ruleContexts:s}))}function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach(function(t){Aa(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Aa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Na=function(e){var t,n=e.searchAsYouSpeak,r=e.language,i=e.onQueryChange,a=e.onStateChange,o=window.webkitSpeechRecognition||window.SpeechRecognition,c=function(e){return{status:e,transcript:"",isSpeechFinal:!1,errorCode:void 0}},s=c("initial"),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=Da({},s,{},e),a()},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"initial";u(c(e))},l=function(){u({status:"waiting"})},h=function(e){u({status:"error",errorCode:e.error})},d=function(e){u({status:"recognizing",transcript:e.results[0]&&e.results[0][0]&&e.results[0][0].transcript||"",isSpeechFinal:e.results[0]&&e.results[0].isFinal}),n&&s.transcript&&i(s.transcript)},g=function(){s.errorCode||!s.transcript||n||i(s.transcript),"error"!==s.status&&u({status:"finished"})},p=function(){t&&(t.stop(),t.removeEventListener("start",l),t.removeEventListener("error",h),t.removeEventListener("result",d),t.removeEventListener("end",g),t=void 0)};return{getState:function(){return s},isBrowserSupported:function(){return Boolean(o)},isListening:function(){return"askingPermission"===s.status||"waiting"===s.status||"recognizing"===s.status},startListening:function(){(t=new o)&&(f("askingPermission"),t.interimResults=!0,r&&(t.lang=r),t.addEventListener("start",l),t.addEventListener("error",h),t.addEventListener("result",d),t.addEventListener("end",g),t.start())},stopListening:function(){p(),f("finished")},dispose:p}};function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach(function(t){Ha(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ha(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wa=rt({name:"voice-search",connector:!0});return function(e,t,n){return function(){return{search:"",algolia:null,hits:[],widgetState:{},init:function(){var n=this,r=JSON.parse(this.$el.dataset.config),i=e(r.id,r.key);this.algolia=t({indexName:r.index,searchClient:i});var a=r.widgets.map(function(e){return n.connectWidget(e)});this.algolia.addWidgets(a),setTimeout(function(){return n.algolia.start()},1),setTimeout(function(){return console.log(n.hits)},1e3)},getWidgetState:function(e,t,n){void 0===n&&(n={});var r=t.split(".");r.unshift(e);try{return r.reduce(function(e,t){if(!(t in e))throw!1;return e[t]},this.widgetState)}catch(e){return n}},connectWidget:function(e){var t="connect"+e.name;return n[t](this[t].bind(this))(e.config)},connectSearchBox:function(e,t){var n=e.query,r=e.refine;t&&this.$watch("search",function(e){return r(e)}),this.search=n},connectHits:function(e){this.hits=e.hits},connectRefinementList:function(e){this.widgetState[e.widgetParams.id]=e}}}}(t,Yn,{__proto__:null,connectClearRefinements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,er()),function(n){var r=n||{},i=r.includedAttributes,a=void 0===i?[]:i,o=r.excludedAttributes,c=void 0===o?["query"]:o,s=r.transformItems,u=void 0===s?function(e){return e}:s;if(n.includedAttributes&&n.excludedAttributes)throw new Error(er("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var f={refine:ne,createURL:function(){return""},attributesToClear:[]},l=function(){return f.refine()},h=function(){return f.createURL()};return{$$type:"ais.clearRefinements",init:function(t){var n=t.instantSearchInstance;e(Zn({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Zn({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(){t()},getRenderState:function(e,t){return Zn({},e,{clearRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL;return f.attributesToClear=e.scopedResults.reduce(function(e,t){return e.concat(tr({scopedResult:t,includedAttributes:a,excludedAttributes:c,transformItems:u}))},[]),f.refine=function(){f.attributesToClear.forEach(function(e){var t=e.helper;t.setState(Z({helper:t,attributesToClear:e.items})).search()})},f.createURL=function(){return t(et.apply(void 0,Gn(f.attributesToClear.map(function(e){return Z({helper:e.helper,attributesToClear:e.items})}))))},{hasRefinements:f.attributesToClear.some(function(e){return e.items.length>0}),refine:l,createURL:h,widgetParams:n}}}}},connectCurrentRefinements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,ar()),function(n){if((n||{}).includedAttributes&&(n||{}).excludedAttributes)throw new Error(ar("The options `includedAttributes` and `excludedAttributes` cannot be used together."));var r=n||{},i=r.includedAttributes,a=r.excludedAttributes,o=void 0===a?["query"]:a,c=r.transformItems,s=void 0===c?function(e){return e}:c;return{$$type:"ais.currentRefinements",init:function(t){var n=t.instantSearchInstance;e(rr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(rr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(){t()},getRenderState:function(e,t){return rr({},e,{currentRefinements:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.createURL,r=e.helper;return{items:e.results?e.scopedResults.reduce(function(e,t){return e.concat(s(or({results:t.results,helper:t.helper,includedAttributes:i,excludedAttributes:o})))},[]):s(or({results:{},helper:r,includedAttributes:i,excludedAttributes:o})),refine:function(e){return sr(r,e)},createURL:function(e){return t(cr(r.state,e))},widgetParams:n}}}}},connectHierarchicalMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,pr()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attributes,i=n.separator,a=void 0===i?" > ":i,o=n.rootPath,c=void 0===o?null:o,s=n.showParentLevel,u=void 0===s||s,f=n.limit,l=void 0===f?10:f,h=n.showMore,d=void 0!==h&&h,g=n.showMoreLimit,p=void 0===g?20:g,m=n.sortBy,v=void 0===m?["name:asc"]:m,y=n.transformItems,b=void 0===y?function(e){return e}:y;if(!r||!Array.isArray(r)||0===r.length)throw new Error(pr("The `attributes` option expects an array of strings."));if(!0===d&&p<=l)throw new Error(pr("The `showMoreLimit` option must be greater than `limit`."));var O,w=gr(r,1),S=w[0],j=function(){};function P(){j()}return{$$type:"ais.hierarchicalMenu",isShowingMore:!1,createToggleShowMore:function(e){var t=this;return function(){t.isShowingMore=!t.isShowingMore,t.render(e)}},getLimit:function(){return this.isShowingMore?p:l},init:function(t){var n=t.instantSearchInstance;e(hr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},_prepareFacetValues:function(e){var t=this;return e.slice(0,this.getLimit()).map(function(e){var n=e.name,r=e.path,i=fr(e,["name","path"]);return Array.isArray(i.data)&&(i.data=t._prepareFacetValues(i.data)),hr({},i,{label:n,value:r})})},render:function(t){var n=t.instantSearchInstance;j=this.createToggleShowMore(t),e(hr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.removeHierarchicalFacet(S).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return hr({},e,{hierarchicalMenu:hr({},e.hierarchicalMenu,dr({},S,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=this,r=e.results,i=e.state,a=e.createURL,o=e.helper;O||(O=mt({instantSearchInstance:e.instantSearchInstance,helper:o,attribute:S,widgetType:this.$$type})),this._refine||(this._refine=function(e){O("click",e),o.toggleRefinement(S,e).search()});var c=r&&r.getFacetValues(S,{sortBy:v}).data||[];return{items:b(r?this._prepareFacetValues(c):[]),refine:this._refine,createURL:function(e){return a(i.toggleRefinement(S,e))},sendEvent:O,widgetParams:n,isShowingMore:this.isShowingMore,toggleShowMore:P,canToggleShowMore:d&&(this.isShowingMore||!function(){if(!r)return!1;var e=t.getLimit();return i.maxValuesPerFacet>e?c.length<=e:c.length<e}())}},getWidgetUiState:function(e,t){var n=t.searchParameters.getHierarchicalFacetBreadcrumb(S);return n.length?hr({},e,{hierarchicalMenu:hr({},e.hierarchicalMenu,dr({},S,n))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,i=n.hierarchicalMenu&&n.hierarchicalMenu[S];if(e.isHierarchicalFacet(S)){var o=e.getHierarchicalFacetByName(S);"development"==="production".NODE_ENV&&ie(ge(o.attributes,r)&&o.separator===a&&o.rootPath===c,"Using Breadcrumb and HierarchicalMenu on the same facet with different options overrides the configuration of the HierarchicalMenu.")}var s=e.removeHierarchicalFacet(S).addHierarchicalFacet({name:S,attributes:r,separator:a,rootPath:c,showParentLevel:u}),f=Math.max(s.maxValuesPerFacet||0,d?p:l),h=s.setQueryParameter("maxValuesPerFacet",f);return i?h.addHierarchicalFacetRefinement(S,i.join(a)):h.setQueryParameters({hierarchicalFacetsRefinements:hr({},h.hierarchicalFacetsRefinements,dr({},S,[]))})}}}},connectHits:Or,connectHitsWithInsights:Rr,connectHitsPerPage:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,_r()),function(n){var r=n||{},i=r.transformItems,a=void 0===i?function(e){return e}:i,o=r.items;if(!Array.isArray(o))throw new Error(_r("The `items` option expects an array of objects."));var c=o.filter(function(e){return!0===e.default});if(0===c.length)throw new Error(_r("A default value must be specified in `items`."));if(c.length>1)throw new Error(_r("More than one default value is specified in `items`."));var s=c[0],u=function(e){return function(t){return t||0===t?e.setQueryParameter("hitsPerPage",t).search():e.setQueryParameter("hitsPerPage",void 0).search()}},f=function(e){var t=e.state,n=e.createURL;return function(e){return n(t.setQueryParameter("hitsPerPage",e||0===e?e:void 0))}};return{$$type:"ais.hitsPerPage",init:function(t){var n=t.state,r=t.instantSearchInstance;o.some(function(e){return Number(n.hitsPerPage)===Number(e.value)})||("development"==="production".NODE_ENV&&ie(void 0!==n.hitsPerPage,"\n`hitsPerPage` is not defined.\nThe option `hitsPerPage` needs to be set using the `configure` widget.\n\nLearn more: https://www.algolia.com/doc/api-reference/widgets/hits-per-page/js/\n            "),"development"==="production".NODE_ENV&&ie(!1,'\nThe `items` option of `hitsPerPage` does not contain the "hits per page" value coming from the state: '.concat(n.hitsPerPage,".\n\nYou may want to add another entry to the `items` option with this value.")),o=[{value:"",label:""}].concat(Fr(o))),e(xr({},this.getWidgetRenderState(t),{instantSearchInstance:r}),!0)},render:function(t){var n=t.instantSearchInstance;e(xr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.setQueryParameter("hitsPerPage",void 0)},getRenderState:function(e,t){return xr({},e,{hitsPerPage:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t,r,i=e.state,c=e.results,s=e.createURL,l=e.helper;return{items:a((t=i,r=t.hitsPerPage,o.map(function(e){return xr({},e,{isRefined:Number(e.value)===Number(r)})}))),refine:u(l),createURL:f({state:i,createURL:s}),hasNoResults:!c||0===c.nbHits,widgetParams:n}},getWidgetUiState:function(e,t){var n=t.searchParameters.hitsPerPage;return void 0===n||n===s.value?e:xr({},e,{hitsPerPage:n})},getWidgetSearchParameters:function(e,t){return e.setQueryParameters({hitsPerPage:t.uiState.hitsPerPage||s.value})}}}},connectInfiniteHits:Mr,connectInfiniteHitsWithInsights:Cr,connectMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,$r()),function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.attribute,a=r.limit,o=void 0===a?10:a,c=r.showMore,s=void 0!==c&&c,u=r.showMoreLimit,f=void 0===u?20:u,l=r.sortBy,h=void 0===l?["isRefined","name:asc"]:l,d=r.transformItems,g=void 0===d?function(e){return e}:d;if(!i)throw new Error($r("The `attribute` option is required."));if(!0===s&&f<=o)throw new Error($r("The `showMoreLimit` option must be greater than `limit`."));var p=function(){};function m(){p()}return{$$type:"ais.menu",isShowingMore:!1,createToggleShowMore:function(e){var t=this,n=e.results,r=e.instantSearchInstance;return function(){t.isShowingMore=!t.isShowingMore,t.render({results:n,instantSearchInstance:r})}},getLimit:function(){return this.isShowingMore?f:o},init:function(t){var n=t.instantSearchInstance;e(Br({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Br({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.removeHierarchicalFacet(i).setQueryParameter("maxValuesPerFacet",void 0)},getRenderState:function(e,t){return Br({},e,{menu:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,a=e.createURL,o=e.instantSearchInstance,c=e.helper,u=[],f=!1;if(n||(n=mt({instantSearchInstance:o,helper:c,attribute:i,widgetType:this.$$type})),this._createURL||(this._createURL=function(e){return a(c.state.toggleRefinement(i,e))}),this._refine||(this._refine=function(e){var t=Ur(c.getHierarchicalFacetBreadcrumb(i),1)[0];n("click",e||t),c.toggleRefinement(i,e||t).search()}),p=this.createToggleShowMore({results:t,instantSearchInstance:o}),t){var l=t.getFacetValues(i,{sortBy:h}),d=l&&l.data?l.data:[];f=s&&(this.isShowingMore||d.length>this.getLimit()),u=g(d.slice(0,this.getLimit()).map(function(e){var t=e.name,n=e.path;return Br({},Qr(e,["name","path"]),{label:t,value:n})}))}return{items:u,createURL:this._createURL,refine:this._refine,sendEvent:n,canRefine:u.length>0,widgetParams:r,isShowingMore:this.isShowingMore,toggleShowMore:m,canToggleShowMore:f}},getWidgetUiState:function(e,t){var n=Ur(t.searchParameters.getHierarchicalFacetBreadcrumb(i),1)[0];return n?Br({},e,{menu:Br({},e.menu,Vr({},i,n))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.menu&&n.menu[i],a=e.removeHierarchicalFacet(i).addHierarchicalFacet({name:i,attributes:[i]}),c=Math.max(a.maxValuesPerFacet||0,s?f:o),u=a.setQueryParameter("maxValuesPerFacet",c);return r?u.addHierarchicalFacetRefinement(i,r):u.setQueryParameters({hierarchicalFacetsRefinements:Br({},u.hierarchicalFacetsRefinements,Vr({},i,[]))})}}}},connectNumericMenu:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Xr()),function(n){var r=n||{},i=r.attribute,a=void 0===i?"":i,o=r.items,c=void 0===o?[]:o,s=r.transformItems,u=void 0===s?function(e){return e}:s;if(""===a)throw new Error(Xr("The `attribute` option is required."));if(!c||0===c.length)throw new Error(Xr("The `items` option expects an array of objects."));var f=function(e){return c.map(function(t){var n=t.start,r=t.end,i=t.label;return{label:i,value:window.encodeURI(JSON.stringify({start:n,end:r})),isRefined:ei(e,a,{start:n,end:r,label:i})}})},l={};return{$$type:Zr,init:function(t){var n=t.instantSearchInstance;e(Yr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Yr({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.clearRefinements(a)},getWidgetUiState:function(e,t){var n=t.searchParameters.getNumericRefinements(a),r=n["="]&&n["="][0];if(r||0===r)return Yr({},e,{numericMenu:Yr({},e.numericMenu,Gr({},a,"".concat(n["="])))});var i=n[">="]&&n[">="][0]||"",o=n["<="]&&n["<="][0]||"";return""===i&&""===o?e:Yr({},e,{numericMenu:Yr({},e.numericMenu,Gr({},a,"".concat(i,":").concat(o)))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.numericMenu&&n.numericMenu[a],i=e.clearRefinements(a);if(!r)return i.setQueryParameters({numericRefinements:Yr({},i.numericRefinements,Gr({},a,{}))});if(-1===r.indexOf(":"))return i.addNumericRefinement(a,"=",Number(r));var o=Jr(r.split(":").map(parseFloat),2),c=o[0],s=o[1],u=ue(c)?i.addNumericRefinement(a,">=",c):i;return ue(s)?u.addNumericRefinement(a,"<=",s):u},getRenderState:function(e,t){return Yr({},e,{numericMenu:Yr({},e.numericMenu,Gr({},a,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.results,r=e.state,i=e.instantSearchInstance,o=e.helper,c=e.createURL;return l.refine||(l.refine=function(e){var t=ti(o.state,a,e);l.sendEvent("click",e),o.setState(t).search()}),l.createURL||(l.createURL=function(e){return function(t){return c(ti(e,a,t))}}),l.sendEvent||(l.sendEvent=Kr({instantSearchInstance:i,helper:o,attribute:a})),{createURL:l.createURL(r),items:u(f(r)),hasNoResults:!t||0===t.nbHits,refine:l.refine,sendEvent:l.sendEvent,widgetParams:n}}}}},connectPagination:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,si()),function(n){var r=n||{},i=r.totalPages,a=r.padding,o=new ii({currentPage:0,total:0,padding:void 0===a?3:a}),c={};return{$$type:"ais.pagination",init:function(t){var n=t.instantSearchInstance;e(oi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(oi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.setQueryParameter("page",void 0)},getWidgetUiState:function(e,t){var n=t.searchParameters.page||0;return n?oi({},e,{page:n+1}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("page",n.page?n.page-1:0)},getWidgetRenderState:function(e){var t=e.results,r=e.helper,a=e.createURL;c.refine||(c.refine=function(e){r.setPage(e),r.search()}),c.createURL||(c.createURL=function(e){return function(t){return a(e.setPage(t))}});var s=r.state,u=s.page||0,f=function(e){var t=e.nbPages;return void 0!==i?Math.min(i,t):t}(t||{nbPages:0});return o.currentPage=u,o.total=f,{createURL:c.createURL(s),refine:c.refine,currentRefinement:u,nbHits:(null==t?void 0:t.nbHits)||0,nbPages:f,pages:t?o.pages():[],isFirstPage:o.isFirstPage(),isLastPage:o.isLastPage(),widgetParams:n}},getRenderState:function(e,t){return oi({},e,{pagination:this.getWidgetRenderState(t)})}}}},connectRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,di()),function(n){var r=n||{},i=r.attribute,a=r.min,o=r.max,c=r.precision,s=void 0===c?0:c;if(!i)throw new Error(di("The `attribute` option is required."));if(ue(a)&&ue(o)&&a>o)throw new Error(di("The `max` option can't be lower than `min`."));var u={from:function(e){return e.toLocaleString()},to:function(e){return function(e){return Number(Number(e).toFixed(s))}(e).toLocaleString()}},f=function(e,t,n,r){var c,u,f=e.state,l=t.min,h=t.max,d=hi(f.getNumericRefinement(i,">=")||[],1)[0],g=hi(f.getNumericRefinement(i,"<=")||[],1)[0],p=void 0===n||""===n,m=void 0===r||""===r,v=pi({min:p?void 0:parseFloat(n),max:m?void 0:parseFloat(r),precision:s}),y=v.min,b=v.max;c=ue(a)||l!==y?ue(a)&&p?a:y:void 0,u=ue(o)||h!==b?ue(o)&&m?o:b:void 0;var O=void 0===c,w=ue(l)&&l<=c,S=O||ue(c)&&(!ue(l)||w),j=void 0===u,P=ue(u)&&h>=u,R=j||ue(u)&&(!ue(h)||P);return(d!==c||g!==u)&&S&&R?(f=f.removeNumericRefinement(i),ue(c)&&(f=f.addNumericRefinement(i,">=",c)),ue(u)&&(f=f.addNumericRefinement(i,"<=",u)),f):null},l=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Filter Applied",a=wt(e,i);a&&a.length>0&&t.sendEventToInsights({insightsMethod:"clickedFilters",widgetType:gi,eventType:"click",payload:{eventName:r,index:n.getIndex(),filters:a}})},h=function(e,t,n){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];if(1!==i.length){var o=i[0],c=i[1],s=i[2];if("click"===o){var u=hi(c,2),h=u[0],d=u[1],g=f(t,n,h,d);l(g,e,t,s)}}else e.sendEventToInsights(i[0])}};function d(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[void 0,void 0],i=hi(r,2),a=i[0],o=i[1],c=f(t,n,a,o);c&&(l(c,e,t),t.setState(c).search())}}return{$$type:gi,init:function(t){e(fi({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!0)},render:function(t){e(fi({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!1)},getRenderState:function(e,t){return fi({},e,{range:fi({},e.range,li({},i,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,r=e.results,c=e.helper,f=e.instantSearchInstance,l=z(r&&r.disjunctiveFacets||[],function(e){return e.name===i}),g=(t=l&&l.stats||{min:void 0,max:void 0},pi({min:ue(a)?a:ue(t.min)?t.min:0,max:ue(o)?o:ue(t.max)?t.max:0,precision:s})),p=function(e){var t=hi(e.getNumericRefinement(i,">=")||[],1)[0],n=hi(e.getNumericRefinement(i,"<=")||[],1)[0];return[ue(t)?t:-Infinity,ue(n)?n:Infinity]}(c);return{refine:d(f,c,r?g:{min:void 0,max:void 0}),format:u,range:g,sendEvent:h(f,c,g),widgetParams:fi({},n,{precision:s}),start:p}},dispose:function(e){var n=e.state;return t(),n.removeDisjunctiveFacet(i).removeNumericRefinement(i)},getWidgetUiState:function(e,t){var n=t.searchParameters.getNumericRefinements(i),r=n[">="],a=void 0===r?[]:r,o=n["<="],c=void 0===o?[]:o;return 0===a.length&&0===c.length?e:fi({},e,{range:fi({},e.range,li({},i,"".concat(a,":").concat(c)))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=e.addDisjunctiveFacet(i).setQueryParameters({numericRefinements:fi({},e.numericRefinements,li({},i,{}))});ue(a)&&(r=r.addNumericRefinement(i,">=",a)),ue(o)&&(r=r.addNumericRefinement(i,"<=",o));var c=n.range&&n.range[i];if(!c||-1===c.indexOf(":"))return r;var s=hi(c.split(":").map(parseFloat),2),u=s[0],f=s[1];return ue(u)&&(r=r.addNumericRefinement(i,">=",u)),ue(f)&&(r=r.addNumericRefinement(i,"<=",f)),r}}}},connectRefinementList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Oi()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attribute,i=n.operator,a=void 0===i?"or":i,o=n.limit,c=void 0===o?10:o,s=n.showMore,u=void 0!==s&&s,f=n.showMoreLimit,l=void 0===f?20:f,h=n.sortBy,d=void 0===h?["isRefined","count:desc","name:asc"]:h,g=n.escapeFacetValues,p=void 0===g||g,m=n.transformItems,v=void 0===m?function(e){return e}:m;if(!r)throw new Error(Oi("The `attribute` option is required."));if(!/^(and|or)$/.test(a))throw new Error(Oi('The `operator` must one of: `"and"`, `"or"` (got "'.concat(a,'").')));if(!0===u&&l<=c)throw new Error(Oi("`showMoreLimit` should be greater than `limit`."));var y,b,O,w,S,j=function(e){var t=e.name;return vi({},bi(e,["name"]),{label:t,value:t,highlighted:t})},P=function(e){return e?l:c},R=[],F=!0,E=function(t){var n=this;return function(i){return function(a){var o=i.instantSearchInstance;if(""===a&&R)e(vi({},n.getWidgetRenderState(vi({},i,{results:y})),{instantSearchInstance:o}));else{var s={highlightPreTag:p?Re.highlightPreTag:Fe,highlightPostTag:p?Re.highlightPostTag:Ee};t.searchForFacetValues(r,a,Math.min(P(n.isShowingMore),100),s).then(function(t){var r=p?Te(t.facetHits):t.facetHits,a=v(r.map(function(e){var t=e.value;return vi({},bi(e,["value"]),{value:t,label:t})})),s=n.isShowingMore&&R.length>c;e(vi({},n.getWidgetRenderState(vi({},i,{results:y})),{items:a,canToggleShowMore:s,canRefine:!0,instantSearchInstance:o,isFromSearch:!0}))})}}}};return{$$type:"ais.refinementList",isShowingMore:!1,toggleShowMore:function(){},cachedToggleShowMore:function(){S()},createToggleShowMore:function(e){var t=this;return function(){t.isShowingMore=!t.isShowingMore,t.render(e)}},getLimit:function(){return P(this.isShowingMore)},init:function(t){e(vi({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!0)},render:function(t){e(vi({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!1)},getRenderState:function(e,t){return vi({},e,{refinementList:vi({},e.refinementList,yi({},r,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t,i=e.results,a=e.state,o=e.createURL,s=e.isFromSearch,f=void 0!==s&&s,l=e.helper,h=[];if(w&&O&&b||(w=mt({instantSearchInstance:e.instantSearchInstance,helper:l,attribute:r,widgetType:this.$$type}),O=function(e){w("click",e),l.toggleRefinement(r,e).search()},b=E.call(this,l)),i){f?(t=p?Te(i.facetHits):i.facetHits,h=v(t.map(function(e){var t=e.value;return vi({},bi(e,["value"]),{value:t,label:t})}))):(t=i.getFacetValues(r,{sortBy:d})||[],h=v(t.slice(0,this.getLimit()).map(j)));var g=a.maxValuesPerFacet,m=this.getLimit();F=g>m?t.length<=m:t.length<m,y=i,R=h,S=this.createToggleShowMore(e)}var P=b&&b(e);return{createURL:function(e){return o(a.toggleRefinement(r,e))},items:h,refine:O,searchForItems:P,isFromSearch:f,canRefine:f||h.length>0,widgetParams:n,isShowingMore:this.isShowingMore,canToggleShowMore:this.isShowingMore&&R.length>c||u&&!f&&!F,toggleShowMore:this.cachedToggleShowMore,sendEvent:w,hasExhaustiveItems:F}},dispose:function(e){var n=e.state;t();var i=n.setQueryParameter("maxValuesPerFacet",void 0);return"and"===a?i.removeFacet(r):i.removeDisjunctiveFacet(r)},getWidgetUiState:function(e,t){var n=t.searchParameters,i="or"===a?n.getDisjunctiveRefinements(r):n.getConjunctiveRefinements(r);return i.length?vi({},e,{refinementList:vi({},e.refinementList,yi({},r,i))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,i="or"===a,o=n.refinementList&&n.refinementList[r],s=e.clearRefinements(r),f=i?s.addDisjunctiveFacet(r):s.addFacet(r),h=Math.max(f.maxValuesPerFacet||0,u?l:c),d=f.setQueryParameter("maxValuesPerFacet",h);if(!o){var g=i?"disjunctiveFacetsRefinements":"facetsRefinements";return d.setQueryParameters(yi({},g,vi({},d[g],yi({},r,[]))))}return o.reduce(function(e,t){return i?e.addDisjunctiveFacetRefinement(r,t):e.addFacetRefinement(r,t)},d)}}}},connectSearchBox:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Pi()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.queryHook;function i(e){return function(){e.setQuery("").search()}}var a=function(){};function o(){a()}return{$$type:"ais.searchBox",init:function(t){var n=t.instantSearchInstance;e(Si({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Si({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.setQueryParameter("query",void 0)},getRenderState:function(e,t){return Si({},e,{searchBox:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.helper,c=e.searchMetadata;if(!this._refine){var s=function(e){e!==t.state.query&&t.setQuery(e).search()};this._refine=function(e){r?r(e,s):s(e)}}return a=i(t),{query:t.state.query||"",refine:this._refine,clear:o,widgetParams:n,isSearchStalled:c.isSearchStalled}},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return""===n||e&&e.query===n?e:Si({},e,{query:n})},getWidgetSearchParameters:function(e,t){return e.setQueryParameter("query",t.uiState.query||"")}}}},connectSortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,xi()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.items,i=n.transformItems,a=void 0===i?function(e){return e}:i;if(!Array.isArray(r))throw new Error(xi("The `items` option expects an array of objects."));return{$$type:"ais.sortBy",init:function(t){var n=t.instantSearchInstance,i=this.getWidgetRenderState(t),a=i.currentRefinement,o=z(r,function(e){return e.value===a});"development"==="production".NODE_ENV&&ie(o,'The index named "'.concat(a,'" is not listed in the `items` of `sortBy`.')),e(Fi({},i,{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Fi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.setIndex(this.initialIndex)},getRenderState:function(e,t){return Fi({},e,{sortBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,i=e.helper;return this.initialIndex||(this.initialIndex=e.parent.getIndexName()),this.setIndex||(this.setIndex=function(e){i.setIndex(e).search()}),{currentRefinement:i.state.index,options:a(r),refine:this.setIndex,hasNoResults:!t||0===t.nbHits,widgetParams:n}},getWidgetUiState:function(e,t){var n=t.searchParameters.index;return n===this.initialIndex?e:Fi({},e,{sortBy:n})},getWidgetSearchParameters:function(e,t){return e.setQueryParameter("index",t.uiState.sortBy||this.initialIndex||e.index)}}}},connectRatingMenu:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Ai()),function(){var r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.attribute,o=i.max,c=void 0===o?5:o;if(!a)throw new Error(Ai("The `attribute` option is required."));var s=function(e){var t=e.getDisjunctiveRefinements(a);if(t.length)return Math.min.apply(Math,Di(t.map(Number)))},u=function(e,t){r("click",t);var n=s(e.state)===Number(t);if(e.removeDisjunctiveFacetRefinement(a),!n)for(var i=Number(t);i<=c;++i)e.addDisjunctiveFacetRefinement(a,i);e.search()},f={toggleRefinementFactory:function(e){return u.bind(t,e)},createURLFactory:function(e){var t=e.state,n=e.createURL;return function(e){return n(t.toggleRefinement(a,e))}}};return{$$type:Ni,init:function(t){var n=t.instantSearchInstance;e(_i({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(_i({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},getRenderState:function(e,t){return _i({},e,{ratingMenu:_i({},e.ratingMenu,Ti({},a,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.helper,n=e.results,o=e.state,u=e.createURL,l=[];if(r||(r=ki({instantSearchInstance:e.instantSearchInstance,helper:t,getRefinedStar:function(){return s(t.state)},attribute:a})),n){for(var h={},d=c;d>=0;--d)h[d]=0;(n.getFacetValues(a)||[]).forEach(function(e){var t=Math.round(e.name);if(t&&!(t>c))for(var n=t;n>=1;--n)h[n]+=e.count});for(var g=s(o),p=c-1;p>=1;--p){var m=h[p];if(!g||p===g||0!==m){for(var v=[],y=1;y<=c;++y)v.push(y<=p);l.push({stars:v,name:String(p),value:String(p),count:m,isRefined:g===p})}}}return{items:l,hasNoResults:!n||0===n.nbHits,refine:f.toggleRefinementFactory(t),sendEvent:r,createURL:f.createURLFactory({state:o,createURL:u}),widgetParams:i}},dispose:function(e){var t=e.state;return n(),t.removeDisjunctiveFacet(a)},getWidgetUiState:function(e,t){var n=s(t.searchParameters);return"number"!=typeof n?e:_i({},e,{ratingMenu:_i({},e.ratingMenu,Ti({},a,n))})},getWidgetSearchParameters:function(e,t){var n=t.uiState,r=n.ratingMenu&&n.ratingMenu[a],i=e.clearRefinements(a).addDisjunctiveFacet(a);return r?he({start:Number(r),end:c+1}).reduce(function(e,t){return e.addDisjunctiveFacetRefinement(a,t)},i):i.setQueryParameters({disjunctiveFacetsRefinements:_i({},i.disjunctiveFacetsRefinements,Ti({},a,[]))})}}}},connectStats:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Mi()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{$$type:"ais.stats",init:function(t){var n=t.instantSearchInstance;e(Hi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Hi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(){t()},getRenderState:function(e,t){return Hi({},e,{stats:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.results,r=e.helper;return t?{hitsPerPage:t.hitsPerPage,nbHits:t.nbHits,nbPages:t.nbPages,page:t.page,processingTimeMS:t.processingTimeMS,query:t.query,widgetParams:n}:{hitsPerPage:r.state.hitsPerPage,nbHits:0,nbPages:0,page:r.state.page||0,processingTimeMS:-1,query:r.state.query||"",widgetParams:n}}}}},connectToggleRefinement:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,qi()),function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.attribute,i=n.on,a=void 0===i||i,o=n.off;if(!r)throw new Error(qi("The `attribute` option is required."));var c,s=void 0!==o,u=void 0!==a,f=u?tt(a).map(K):void 0,l=s?tt(o).map(K):void 0,h=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isRefined;n?(f.forEach(function(t){return e.removeDisjunctiveFacetRefinement(r,t)}),s&&l.forEach(function(t){return e.addDisjunctiveFacetRefinement(r,t)})):(c("click",n),s&&l.forEach(function(t){return e.removeDisjunctiveFacetRefinement(r,t)}),f.forEach(function(t){return e.addDisjunctiveFacetRefinement(r,t)})),e.search()}},d={createURLFactory:function(e,t){var n=t.state,i=t.createURL;return function(){var t=e?f:l;t&&t.forEach(function(e){n.removeDisjunctiveFacetRefinement(r,e)});var a=e?l:f;return a&&a.forEach(function(e){n.addDisjunctiveFacetRefinement(r,e)}),i(n)}}};return{$$type:Bi,init:function(t){var n=t.instantSearchInstance;e(Qi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(Qi({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},dispose:function(e){var n=e.state;return t(),n.removeDisjunctiveFacet(r)},getRenderState:function(e,t){return Qi({},e,{toggleRefinement:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=e.state,i=e.helper,a=e.results,o=e.createURL,u=e.instantSearchInstance,g=a?null==f?void 0:f.every(function(e){return i.state.isDisjunctiveFacetRefined(r,e)}):null==f?void 0:f.every(function(e){return t.isDisjunctiveFacetRefined(r,e)}),p={isRefined:g,count:0},m={isRefined:s&&!g,count:0};if(a){var v=tt(l||!1),y=a.getFacetValues(r)||[],b=null==f?void 0:f.map(function(e){return z(y,function(t){return t.name===Y(e)})}).filter(function(e){return void 0!==e}),O=s?v.map(function(e){return z(y,function(t){return t.name===Y(e)})}).filter(function(e){return void 0!==e}):[];p={isRefined:!!b.length&&b.every(function(e){return e.isRefined}),count:b.reduce(function(e,t){return e+t.count},0)||null},m={isRefined:!!O.length&&O.every(function(e){return e.isRefined}),count:O.reduce(function(e,t){return e+t.count},0)||y.reduce(function(e,t){return e+t.count},0)}}else s&&!g&&(l&&l.forEach(function(e){return i.addDisjunctiveFacetRefinement(r,e)}),i.setPage(i.state.page));return c||(c=Vi({instantSearchInstance:u,attribute:r,on:f,helper:i})),{value:{name:r,isRefined:g,count:a?(g?m:p).count:null,onFacetValue:p,offFacetValue:m},state:t,createURL:d.createURLFactory(g,{state:t,createURL:o}),sendEvent:c,refine:h(i),widgetParams:n}},getWidgetUiState:function(e,t){var n=t.searchParameters,i=f&&f.every(function(e){return n.isDisjunctiveFacetRefined(r,e)});return i?Qi({},e,{toggle:Qi({},e.toggle,Ui({},r,i))}):e},getWidgetSearchParameters:function(e,t){var n=t.uiState,i=e.clearRefinements(r).addDisjunctiveFacet(r);return Boolean(n.toggle&&n.toggle[r])?(f&&f.forEach(function(e){i=i.addDisjunctiveFacetRefinement(r,e)}),i):s?(l&&l.forEach(function(e){i=i.addDisjunctiveFacetRefinement(r,e)}),i):i.setQueryParameters({disjunctiveFacetsRefinements:Qi({},e.disjunctiveFacetsRefinements,Ui({},r,[]))})}}}},connectBreadcrumb:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;te(e,Gi());var n={};return function(r){var i=r||{},a=i.attributes,o=i.separator,c=void 0===o?" > ":o,s=i.rootPath,u=void 0===s?null:s,f=i.transformItems,l=void 0===f?function(e){return e}:f;if(!a||!Array.isArray(a)||0===a.length)throw new Error(Gi("The `attributes` option expects an array of strings."));var h=Yi(a,1)[0];return{$$type:"ais.breadcrumb",init:function(t){e(Ji({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!0)},render:function(t){e(Ji({},this.getWidgetRenderState(t),{instantSearchInstance:t.instantSearchInstance}),!1)},dispose:function(){t()},getRenderState:function(e,t){return Ji({},e,{breadcrumb:Ji({},e.breadcrumb,zi({},h,this.getWidgetRenderState(t)))})},getWidgetRenderState:function(e){var t=e.helper,i=e.createURL,a=e.results,o=e.state,c=function(){if(!a)return[];var e=Yi(o.hierarchicalFacets,1),t=a.getFacetValues(e[0].name,{}),n=Array.isArray(t.data)?t.data:[];return l(Zi(Xi(n)))}();return n.createURL||(n.createURL=function(e){if(!e){var n=t.getHierarchicalFacetBreadcrumb(h);if(n.length>0)return i(t.state.toggleFacetRefinement(h,n[0]))}return i(t.state.toggleFacetRefinement(h,e))}),n.refine||(n.refine=function(e){if(e)t.toggleRefinement(h,e).search();else{var n=t.getHierarchicalFacetBreadcrumb(h);n.length>0&&t.toggleRefinement(h,n[0]).search()}}),{canRefine:c.length>0,createURL:n.createURL,items:c,refine:n.refine,widgetParams:r}},getWidgetSearchParameters:function(e){if(e.isHierarchicalFacet(h)){var t=e.getHierarchicalFacetByName(h);return"development"==="production".NODE_ENV&&ie(ge(t.attributes,a)&&t.separator===c&&t.rootPath===u,"Using Breadcrumb and HierarchicalMenu on the same facet with different options overrides the configuration of the HierarchicalMenu."),e}return e.addHierarchicalFacet({name:h,attributes:a,separator:c,rootPath:u})}}}},connectGeoSearch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,na()),function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.enableRefineOnMapMove,a=void 0===i||i,o=r.transformItems,c=void 0===o?function(e){return e}:o,s={isRefineOnMapMove:a,hasMapMoveSinceLastRefine:!1,lastRefinePosition:"",lastRefineBoundingBox:"",internalToggleRefineOnMapMove:ne,internalSetMapMoveSinceLastRefine:ne},u=function(e){return e.aroundLatLng&&ot(e.aroundLatLng)},f=function(e){return e.insideBoundingBox&&ct(e.insideBoundingBox)},l=function(e){return function(t){var n=t.northEast,r=t.southWest,i=[n.lat,n.lng,r.lat,r.lng].join();e.setQueryParameter("insideBoundingBox",i).search(),s.hasMapMoveSinceLastRefine=!1,s.lastRefineBoundingBox=i}},h=function(e){return function(){e.setQueryParameter("insideBoundingBox",void 0).search()}},d=function(e){return function(){return Boolean(e.insideBoundingBox)}},g=function(){return s.internalToggleRefineOnMapMove()},p=function(e,t){return function(){s.isRefineOnMapMove=!s.isRefineOnMapMove,e(t)}},m=function(){return s.isRefineOnMapMove},v=function(){return s.internalSetMapMoveSinceLastRefine()},y=function(e,t){return function(){var n=!0!==s.hasMapMoveSinceLastRefine;s.hasMapMoveSinceLastRefine=!0,n&&e(t)}},b=function(){return s.hasMapMoveSinceLastRefine};return{$$type:ra,init:function(t){var n=t.instantSearchInstance;s.internalToggleRefineOnMapMove=p(ne,t),s.internalSetMapMoveSinceLastRefine=y(ne,t),e(ea({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var r=t.instantSearchInstance,i=t.helper.state,a=Boolean(i.aroundLatLng)&&Boolean(s.lastRefinePosition)&&i.aroundLatLng!==s.lastRefinePosition,o=!i.insideBoundingBox&&Boolean(s.lastRefineBoundingBox)&&i.insideBoundingBox!==s.lastRefineBoundingBox;(a||o)&&(s.hasMapMoveSinceLastRefine=!1),s.lastRefinePosition=i.aroundLatLng||"",s.lastRefineBoundingBox=i.insideBoundingBox||"",s.internalToggleRefineOnMapMove=p(this.render.bind(this),t),s.internalSetMapMoveSinceLastRefine=y(this.render.bind(this),t);var c=this.getWidgetRenderState(t);n("view",c.items),e(ea({},c,{instantSearchInstance:r}),!1)},getWidgetRenderState:function(e){var t=e.helper,i=e.results,a=e.instantSearchInstance,o=t.state,s=i?c(i.hits.filter(function(e){return e._geoloc})):[];return n||(n=bt({instantSearchInstance:a,index:t.getIndex(),widgetType:ra})),{items:s,position:u(o),currentRefinement:f(o),refine:l(t),sendEvent:n,clearMapRefinement:h(t),isRefinedWithMap:d(o),toggleRefineOnMapMove:g,isRefineOnMapMove:m,setMapMoveSinceLastRefine:v,hasMapMoveSinceLastRefine:b,widgetParams:r}},getRenderState:function(e,t){return ea({},e,{geoSearch:this.getWidgetRenderState(t)})},dispose:function(e){var n=e.state;return t(),n.setQueryParameter("insideBoundingBox",void 0)},getWidgetUiState:function(e,t){var n=t.searchParameters.insideBoundingBox;return!n||e&&e.geoSearch&&e.geoSearch.boundingBox===n?e:ea({},e,{geoSearch:{boundingBox:n}})},getWidgetSearchParameters:function(e,t){var n=t.uiState;return e.setQueryParameter("insideBoundingBox",n&&n.geoSearch?n.geoSearch.boundingBox:void 0)}}}},connectPoweredBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;te(e,ca());var n="https://www.algolia.com/?utm_source=instantsearch.js&utm_medium=website&"+"utm_content=".concat("undefined"!=typeof window&&window.location?window.location.hostname:"","&")+"utm_campaign=poweredby";return function(r){var i=(r||{}).url,a=void 0===i?n:i;return{$$type:"ais.poweredBy",init:function(t){var n=t.instantSearchInstance;e(aa({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(aa({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},getRenderState:function(e,t){return aa({},e,{poweredBy:this.getWidgetRenderState(t)})},getWidgetRenderState:function(){return{url:a,widgetParams:r}},dispose:function(){t()}}}},connectConfigure:da,EXPERIMENTAL_connectConfigureRelatedItems:function(e,t){return function(n){var r=n||{},i=r.hit,a=r.matchingPatterns,o=r.transformSearchParameters,c=void 0===o?function(e){return e}:o;if(!i)throw new Error(ya("The `hit` option is required."));if(!a)throw new Error(ya("The `matchingPatterns` option is required."));var s=Object.keys(a).reduce(function(e,t){var n=a[t],r=se(i,t),o=n.score;return Array.isArray(r)?[].concat(va(e),[r.map(function(e){return ba({attributeName:t,attributeValue:e,attributeScore:o})})]):"string"==typeof r?[].concat(va(e),[ba({attributeName:t,attributeValue:r,attributeScore:o})]):("development"==="production".NODE_ENV&&ie(!1,"\nThe `matchingPatterns` option returned a value of type ".concat(ee(r),' for the "').concat(t,'" key. This value was not sent to Algolia because `optionalFilters` only supports strings and array of strings.\n\nYou can remove the "').concat(t,'" key from the `matchingPatterns` option.\n\nSee https://www.algolia.com/doc/api-reference/api-parameters/optionalFilters/\n            ')),e)},[]),u=pa({},c(new q.SearchParameters({sumOrFiltersScores:!0,facetFilters:["objectID:-".concat(i.objectID)],optionalFilters:s})));return pa({},da(e,t)({searchParameters:u}),{$$type:"ais.configureRelatedItems"})}},connectAutocomplete:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,ja()),function(n){var r=(n||{}).escapeHTML,i=void 0===r||r;"development"==="production".NODE_ENV&&ie(!n.indices,"\nThe option `indices` has been removed from the Autocomplete connector.\n\nThe indices to target are now inferred from the widgets tree.\n".concat(Array.isArray(n.indices)?"\nAn alternative would be:\n\nconst autocomplete = connectAutocomplete(renderer);\n\nsearch.addWidgets([\n  ".concat(n.indices.map(function(e){return"index({ indexName: '".concat(e.value,"' }),")}).join("\n  "),"\n  autocomplete()\n]);\n"):"","\n      "));var a={};return{$$type:"ais.autocomplete",init:function(t){var n=t.instantSearchInstance;e(wa({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance,r=this.getWidgetRenderState(t);r.indices.forEach(function(e){(0,e.sendEvent)("view",e.hits)}),e(wa({},r,{instantSearchInstance:n}),!1)},getRenderState:function(e,t){return wa({},e,{autocomplete:this.getWidgetRenderState(t)})},getWidgetRenderState:function(e){var t=this,r=e.helper,o=e.scopedResults,c=e.instantSearchInstance;a.refine||(a.refine=function(e){r.setQuery(e).search()});var s=o.map(function(e){e.results.hits=i?_e(e.results.hits):e.results.hits;var n=bt({instantSearchInstance:c,index:e.results.index,widgetType:t.$$type});return{indexId:e.indexId,indexName:e.results.index,hits:e.results.hits,results:e.results,sendEvent:n}});return{currentRefinement:r.state.query||"",indices:s,refine:a.refine,widgetParams:n}},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return""===n||e&&e.query===n?e:wa({},e,{query:n})},getWidgetSearchParameters:function(e,t){var n={query:t.uiState.query||""};return e.setQueryParameters(i?wa({},n,{},Re):n)},dispose:function(e){var n=e.state;t();var r=n.setQueryParameter("query",void 0);return i?r.setQueryParameters(Object.keys(Re).reduce(function(e,t){return wa({},e,Sa({},t,void 0))},{})):r}}}},connectQueryRules:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,xa()),function(n){var r=n||{},i=r.trackedFilters,a=void 0===i?{}:i,o=r.transformRuleContexts,c=void 0===o?function(e){return e}:o,s=r.transformItems,u=void 0===s?function(e){return e}:s;Object.keys(a).forEach(function(e){if("function"!=typeof a[e])throw new Error(xa("'The \"".concat(e,'" filter value in the `trackedFilters` option expects a function.')))});var f,l=Object.keys(a).length>0,h=[];return{$$type:"ais.queryRules",init:function(t){var r=t.helper,i=t.state,o=t.instantSearchInstance;f=_a.bind({helper:r,initialRuleContexts:h=i.ruleContexts||[],trackedFilters:a,transformRuleContexts:c}),l&&((Ia(i)||Boolean(n.transformRuleContexts))&&f({state:i}),r.on("change",f)),e(Ra({},this.getWidgetRenderState(t),{instantSearchInstance:o}),!0)},render:function(t){var n=t.instantSearchInstance;e(Ra({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},getWidgetRenderState:function(e){var t=(e.results||{}).userData;return{items:u(void 0===t?[]:t),widgetParams:n}},getRenderState:function(e,t){return Ra({},e,{queryRules:this.getWidgetRenderState(t)})},dispose:function(e){var n=e.helper,r=e.state;return t(),l?(n.removeListener("change",f),r.setQueryParameter("ruleContexts",h)):r}}}},connectVoiceSearch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return te(e,Wa()),function(n){var r=n.searchAsYouSpeak,i=void 0!==r&&r,a=n.language,o=n.additionalQueryParameters,c=n.createVoiceSearchHelper,s=void 0===c?Na:c;return{$$type:"ais.voiceSearch",init:function(t){var n=t.instantSearchInstance;e(La({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!0)},render:function(t){var n=t.instantSearchInstance;e(La({},this.getWidgetRenderState(t),{instantSearchInstance:n}),!1)},getRenderState:function(e,t){return La({},e,{voiceSearch:this.getWidgetRenderState(t)})},getWidgetRenderState:function(t){var r=this,c=t.helper,u=t.instantSearchInstance;this._refine||(this._refine=function(e){if(e!==c.state.query){var t=a?[a.split("-")[0]]:void 0;c.setQueryParameter("queryLanguages",t),"function"==typeof o&&c.setState(c.state.setQueryParameters(La({ignorePlurals:!0,removeStopWords:!0,optionalWords:e},o({query:e})))),c.setQuery(e).search()}}),this._voiceSearchHelper||(this._voiceSearchHelper=s({searchAsYouSpeak:i,language:a,onQueryChange:function(e){return r._refine(e)},onStateChange:function(){e(La({},r.getWidgetRenderState(t),{instantSearchInstance:u}),!1)}}));var f=this._voiceSearchHelper,l=f.isBrowserSupported,h=f.isListening,d=f.startListening,g=f.stopListening,p=f.getState;return{isBrowserSupported:l(),isListening:h(),toggleListening:function(){l()&&(h()?g():d())},voiceListeningState:p(),widgetParams:n}},dispose:function(e){var n=e.state;this._voiceSearchHelper.dispose(),t();var r=n;if("function"==typeof o){var i=o({query:""}),a=i?Object.keys(i).reduce(function(e,t){return e[t]=void 0,e},{}):{};r=n.setQueryParameters(La({queryLanguages:void 0,ignorePlurals:void 0,removeStopWords:void 0,optionalWords:void 0},a))}return r.setQueryParameter("query",void 0)},getWidgetUiState:function(e,t){var n=t.searchParameters.query||"";return n?La({},e,{query:n}):e},getWidgetSearchParameters:function(e,t){return e.setQueryParameter("query",t.uiState.query||"")}}}}})}();
